(this.webpackJsonp=this.webpackJsonp||[]).push([[366],{"3XZy":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/lV4");const s=Object(r.a)("Confidentiality"),i={ANY:{label:Object(r.a)("Any"),value:null},CONFIDENTIAL:{label:Object(r.a)("Confidential"),value:"yes"},NOT_CONFIDENTIAL:{label:Object(r.a)("Not confidential"),value:"no"}},a={ISSUES:"issues"},o={header:s,filters:i,scopes:a,filterByScope:{[a.ISSUES]:[i.ANY,i.CONFIDENTIAL,i.NOT_CONFIDENTIAL]},filterParam:"confidential"}},"3lQS":function(e,t,n){"use strict";var r=n("tbP8"),s=n("FxFN"),i=n("5c3i"),a={components:{GlAvatar:r.a},props:{projectId:{type:[Number,String],default:0,required:!1,validator:e=>"string"!=typeof e||Object(s.h)(e)},projectName:{type:String,required:!0},projectAvatarUrl:{type:String,required:!1,default:""},size:{type:Number,default:32,required:!1},alt:{type:String,required:!1,default:void 0}},computed:{avatarAlt(){var e;return null!==(e=this.alt)&&void 0!==e?e:this.projectName},entityId(){return Object(s.h)(this.projectId)?Object(s.e)(this.projectId):this.projectId}},AVATAR_SHAPE_OPTION_RECT:i.a},o=n("tBpV"),l=Object(o.a)(a,(function(){return(0,this._self._c)("gl-avatar",{attrs:{shape:this.$options.AVATAR_SHAPE_OPTION_RECT,"entity-id":this.entityId,"entity-name":this.projectName,src:this.projectAvatarUrl,alt:this.avatarAlt,size:this.size,"fallback-on-error":!0,itemprop:"image"}})}),[],!1,null,null,null);t.a=l.exports},"5tFN":function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return u}));const r="Escape",s="Enter",i="NumpadEnter",a="Backspace",o="ArrowDown",l="ArrowUp",c="End",u="Home"},"8Igx":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=function(e="",...t){console.error("[gitlab]",e+"\n",...t)}},"9lRJ":function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return _})),n.d(t,"d",(function(){return f})),n.d(t,"o",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return E})),n.d(t,"k",(function(){return S})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return O})),n.d(t,"e",(function(){return y}));var r=n("SH8K"),s=n("3XZy"),i=n("W+L/"),a=n("dnFX"),o=n("MYsM"),l=n("k9RV");const c=5,u=5,d="global-search-frequent-groups",m="global-search-frequent-projects",h=[r.a.filterParam,s.a.filterParam,i.c.filterParam,a.e.filterParam,o.c.filterParam,l.a],p="regex",_={notation:"compact",compactDisplay:"short"},f={blobs:"code",issues:"issues",epics:"epic",merge_requests:"merge-request",commits:"commit",notes:"comments",milestones:"milestone",users:"users",projects:"project",wiki_blobs:"book",snippet_titles:"snippet"},g="zoekt",v="advanced",E="basic",S="global",b="project",O="group",y=p+"_advanced_search"},Eqlq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserFrecentGroups"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frecentGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"namespace"},name:{kind:"Name",value:"fullName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:122}};n.loc.source={body:"query CurrentUserFrecentGroups {\n  frecentGroups {\n    id\n    name\n    namespace: fullName\n    webUrl\n    avatarUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.CurrentUserFrecentGroups=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){o.add(e)})))}))}return a.forEach((function(t){var r=s(e,t);r&&n.definitions.push(r)})),n}(n,"CurrentUserFrecentGroups")},GAJI:function(e,t,n){(e.exports=n("VNgF")(!1)).push([e.i,"\n.fake-input[data-v-f5f79d4c] {\n  position: absolute;\n  top: 14px;\n  left: 39px;\n}\n",""])},Htnb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("3UXl"),n("iyoE");var r=n("PxiM"),s=n.n(r),i=n("D+x4");function a(e,t="",n="<b>",r="</b>"){if(!e)return"";if(!t)return e;const a=Object(i.b)(e.toString(),{ALLOWED_TAGS:[]}),o=s.a.match(a,t.toString());return a.split("").map((function(e,t){return o.includes(t)?`${n}${e}${r}`:e})).join("")}},JTkt:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));const r=document.createElement("div"),s=function(e){return r.style.color="",r.style.color=e,r.style.color.length>0},i=function(e=""){return e?/^#([0-9A-F]{3}){1,2}$/i.test(e):null};function a(){var e;const t=["dark","solarized-dark","monokai"];var n;return(null===(e=document.body.dataset.page)||void 0===e?void 0:e.startsWith("ide:"))?t.includes(null===(n=window.gon)||void 0===n?void 0:n.user_color_scheme):document.documentElement.classList.contains("gl-dark")}},MYsM:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var r=n("/lV4");const s=Object(r.g)("GlobalSearch|Archived"),i=Object(r.g)("GlobalSearch|Include archived"),a="search:archived:select",o="checkbox",l={headerLabel:s,checkboxLabel:i,scopes:["projects","issues","merge_requests","notes","blobs","commits","milestones","wiki_blobs"],filterParam:"include_archived"}},SH8K:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/lV4");const s=Object(r.a)("Status"),i={ANY:{label:Object(r.a)("Any"),value:null},OPEN:{label:Object(r.a)("Open"),value:"opened"},CLOSED:{label:Object(r.a)("Closed"),value:"closed"},MERGED:{label:Object(r.a)("Merged"),value:"merged"}},a={ISSUES:"issues",MERGE_REQUESTS:"merge_requests"},o={header:s,filters:i,scopes:a,filterByScope:{[a.ISSUES]:[i.ANY,i.OPEN,i.CLOSED],[a.MERGE_REQUESTS]:[i.ANY,i.OPEN,i.MERGED,i.CLOSED]},filterParam:"state"}},"W+L/":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n("/lV4");const s=10,i=100,a={header:Object(r.g)("GlobalSearch|Language"),scopes:{BLOBS:"blobs"},filterParam:"language"}},YYYz:function(e,t,n){"use strict";n.r(t);n("eJ0a");var r=n("3CjL"),s=n.n(r),i=n("Tmea"),a=n.n(i),o=(n("aFm2"),n("z6RN"),n("R9qC"),n("iN9h")),l=n("1cpz"),c=n("yi8e"),u=n("ygVz"),d=n("3twG"),m=n("GuZl"),h=n("/lV4"),p=n("5tFN"),_=n("gr1G"),f=n("tTlX"),g=n("JTkt"),v=n("B3M1"),E=n("dowq");var S=n("F/pm"),b=(n("3UXl"),n("iyoE"),n("RFHG"),n("xuo1"),n("UezY"),n("hG7+"),n("v2fZ"),n("PxiM")),O=n.n(b),y=n("fSQg"),k=n("FkSe"),C=n("7F3p"),T=n("2ibD"),x=n("8Igx"),I=n("h2IV"),A=n("I4EJ"),R=n("tbP8"),w=n("s1D3"),L=n("Mp8J"),j=n("Htnb"),N=n("5c3i"),P={name:"CommandPaletteSearchItem",components:{GlAvatar:R.a,GlIcon:w.a},directives:{SafeHtml:L.a},props:{item:{type:Object,required:!0},searchQuery:{type:String,required:!0}},computed:{highlightedName(){return Object(j.a)(this.item.text,this.searchQuery)}},AVATAR_SHAPE_OPTION_RECT:N.a},D=n("tBpV"),G=Object(D.a)(P,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"gl-flex gl-items-center"},[void 0!==e.item.avatar_url?t("gl-avatar",{staticClass:"gl-mr-3",attrs:{src:e.item.avatar_url,"entity-id":e.item.entity_id,"entity-name":e.item.entity_name,size:e.item.avatar_size,shape:e.$options.AVATAR_SHAPE_OPTION_RECT,"aria-hidden":"true"}}):e._e(),e._v(" "),e.item.icon?t("gl-icon",{staticClass:"gl-mr-3 gl-flex-shrink-0",attrs:{name:e.item.icon}}):e._e(),e._v(" "),t("span",{staticClass:"gl-flex gl-flex-col"},[t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.highlightedName,expression:"highlightedName"}],staticClass:"gl-text-gray-900"}),e._v(" "),e.item.namespace?t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.item.namespace,expression:"item.namespace"}],staticClass:"gl-text-sm gl-text-gray-500"}):e._e()])],1)}),[],!1,null,null,null).exports,U=n("nUKU"),$=n.n(U),F=n("59DU"),M=n.n(F),H=n("3cHC");const q=function({name:e,items:t}){return{name:e||A.e,items:t.filter((function({component:e}){return"invite_members"!==e}))}},V=function(e,t){var n;const r=function({id:e,title:t}){return{extraAttrs:{"data-track-action":A.G,"data-track-label":e||H.x,...e?{}:{"data-track-extra":JSON.stringify({title:t})}}}};if(e.push({text:t.title,keywords:t.title,icon:t.icon,href:t.link,...r(t)}),null!==(n=t.items)&&void 0!==n&&n.length){const n=t.items.map((function(e){return{keywords:e.title,text:[t.title,e.title].join(" > "),href:e.link,icon:t.icon,...r(e)}}));e=[...e,...n]}return e},Q=function(e,t){return{icon:"doc-code",text:t,href:Object(d.D)(e,t),extraAttrs:{"data-track-action":A.G,"data-track-label":"file"}}};var B={name:"CommandPaletteItems",components:{GlDisclosureDropdownGroup:y.a,GlLoadingIcon:k.a,SearchItem:G},mixins:[u.b.mixin()],inject:["commandPaletteCommands","commandPaletteLinks","autocompletePath","settingsPath","searchContext","projectFilesPath","projectBlobPath"],props:{searchQuery:{type:String,required:!0},handle:{type:String,required:!0,validator:function(e){return[...A.b,A.v].includes(e)}}},data:function(){return{groups:[],loading:!1,projectFiles:[],debouncedSearch:a()((function(){switch(this.handle){case A.a:this.getCommandsAndPages();break;case A.J:case A.x:case A.i:this.getScopedItems();break;case A.v:this.getProjectFiles()}}),m.h),settings:[]}},computed:{isCommandMode(){return this.handle===A.a},isPathMode(){return this.handle===A.v},commands(){return this.commandPaletteCommands.map(q)},links(){return this.commandPaletteLinks.reduce(V,[])},filteredCommands(){var e=this;return this.searchQuery?this.commands.map((function({name:t,items:n}){return{name:t,items:e.filterBySearchQuery(n,"text")}})).filter((function({items:e}){return e.length})):this.commands},hasResults(){var e;return(null===(e=this.groups)||void 0===e?void 0:e.length)&&this.groups.some((function(e){var t;return null===(t=e.items)||void 0===t?void 0:t.length}))},hasSearchQuery(){var e,t;return this.isCommandMode||this.isPathMode?(null===(t=this.searchQuery)||void 0===t?void 0:t.length)>0:(null===(e=this.searchQuery)||void 0===e?void 0:e.length)>2},searchTerm(){return this.handle===A.i?`${A.i}${this.searchQuery}`:this.searchQuery},filteredProjectFiles(){return this.searchQuery?this.filterBySearchQuery(this.projectFiles,"text").slice(0,A.j):this.projectFiles.slice(0,A.j)}},watch:{searchQuery:{handler(){this.debouncedSearch()},immediate:!0},handle:{handler(e,t){var n;void 0!==t&&this.debouncedSearch();const r=null!==(n=A.H[e])&&void 0!==n?n:"unknown";this.track(A.F,{label:r}),e===A.a&&this.fetchSettings()},immediate:!0}},updated(){this.$emit("updated")},methods:{async fetchSettings(){var e=this;const t=this.searchContext.project.id;t&&await T.a.get(`${this.settingsPath}?project_id=${t}`).then((function(t){e.settings=t.data})).catch((function(t){Object(x.a)(t),e.settings=[]}))},filterBySearchQuery(e,t="keywords"){return O.a.filter(e,this.searchQuery,{key:t})},async getProjectFiles(){if(!this.projectFiles.length){this.loading=!0;try{const e=await T.a.get(this.projectFilesPath);this.projectFiles=null==e?void 0:e.data.map(Q.bind(null,this.projectBlobPath))}catch(e){C.a(e)}finally{this.loading=!1}}this.groups=[{name:A.u,items:this.filteredProjectFiles}]},getCommandsAndPages(){if(!this.searchQuery)return void(this.groups=[...this.commands]);this.groups=[...this.filteredCommands];const e=this.filterBySearchQuery(this.links);e.length&&this.groups.push({name:A.t,items:e});const t=this.filterBySearchQuery(this.settings,"text");t.length&&this.groups.push({name:A.E,items:t})},async getScopedItems(){var e;if(!((null===(e=this.searchQuery)||void 0===e?void 0:e.length)<3)){this.loading=!0;try{var t;const e=await T.a.get(function({path:e,searchTerm:t,handle:n,projectId:r}){const s=$()({term:t,project_id:r,filter:"search",scope:A.C[n]},M.a);return`${e}?${Object(d.F)(s)}`}({path:this.autocompletePath,searchTerm:this.searchTerm,handle:this.handle,projectId:null===(t=this.searchContext.project)||void 0===t?void 0:t.id}));this.groups=[{name:A.g[this.handle],items:e.data.map(I.b)}]}catch(e){C.a(e)}finally{this.loading=!1}}}}},Y=Object(D.a)(B,(function(){var e=this,t=e._self._c;return t("div",[e.loading?t("gl-loading-icon",{staticClass:"gl-my-5",attrs:{size:"lg"}}):e.hasResults?t("ul",{staticClass:"gl-m-0 gl-list-none gl-p-0"},e._l(e.groups,(function(n,r){return t("gl-disclosure-dropdown-group",{key:r,class:{"!gl-mt-0":0===r},attrs:{group:n,bordered:""},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("search-item",{attrs:{item:n,"search-query":e.searchQuery}})]}}],null,!0)})})),1):e.hasSearchQuery&&!e.hasResults?t("div",{staticClass:"gl-py-3 gl-pl-5 gl-text-gray-700"},[e._v("\n    "+e._s(e.__("No results found"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,J={name:"FakeSearchInput",props:{userInput:{type:String,required:!0},scope:{type:String,required:!0,validator:function(e){return[...A.b,A.v].includes(e)}}},computed:{placeholder(){return A.D[this.scope]}}},z=n("LPAU"),K=n.n(z),X=n("GAJI"),W=n.n(X),Z={insert:"head",singleton:!1},ee=(K()(W.a,Z),W.a.locals,Object(D.a)(J,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"fake-input gl-pointer-events-none gl-flex"},[t("span",{staticClass:"gl-opacity-0",attrs:{"data-testid":"search-scope"}},[e._v(e._s(e.scope)+"Â ")]),e._v(" "),e.userInput?e._e():t("span",{staticClass:"gl-pointer-events-none gl-text-gray-500",attrs:{"data-testid":"search-scope-placeholder"}},[e._v(e._s(e.placeholder))])])}),[],!1,null,"f5f79d4c",null).exports),te=n("S3Ko"),ne=n.n(te),re=n("30su"),se=n("R0j4"),ie={name:"CommandPaletteLottery",components:{GlSprintf:re.a},directives:{SafeHtml:se.a},i18n:[Object(h.g)("GlobalSearch|Type %{linkStart}@%{linkEnd} to search for users"),Object(h.g)("GlobalSearch|Type %{linkStart}&gt;%{linkEnd} to search for pages or actions"),Object(h.g)("GlobalSearch|Type %{linkStart}:%{linkEnd} to search for projects"),Object(h.g)("GlobalSearch|Type %{linkStart}~%{linkEnd} to search for files")],computed:{getTipNum(){const e=this.$options.i18n.length-1;return ne()(0,e)}}},ae=Object(D.a)(ie,(function(){var e=this,t=e._self._c;return t("span",[t("gl-sprintf",{attrs:{message:e.$options.i18n[e.getTipNum]},scopedSlots:e._u([{key:"link",fn:function({content:n}){return[t("kbd",{directives:[{name:"safe-html",rawName:"v-safe-html",value:n,expression:"content"}],staticClass:"vertical-align-normalization gl-py-2 gl-text-base"},[e._v(e._s(n))])]}}])})],1)}),[],!1,null,null,null).exports,oe=n("crTv"),le=n("xPX6");const ce=u.a.mixin();var ue={name:"CommandsOverviewDropdown",components:{GlCollapsibleListbox:oe.a,GlSprintf:re.a},mixins:[ce],i18n:{header:Object(h.g)("GlobalSearch|I'm looking for"),button:Object(h.g)("GlobalSearch|Commands %{superKey} %{link2Start}k%{link2End}")},props:{items:{type:Array,required:!0}},computed:{modKey:()=>Object(le.a)(!0)},methods:{emitSelected(e){this.$emit("selected",e)},emitHidden(){this.$emit("hidden")},open(){this.$refs.commandsDropdown.open()},close(){this.$refs.commandsDropdown.close()}},EVENT_CLICK_COMMANDS_SUB_MENU_IN_COMMAND_PALETTE:"click_commands_sub_menu_in_command_palette"},de=Object(D.a)(ue,(function(){var e=this,t=e._self._c;return t("div",[t("gl-collapsible-listbox",{ref:"commandsDropdown",attrs:{items:e.items,"header-text":e.$options.i18n.header,category:"tertiary"},on:{select:e.emitSelected,shown:function(t){return e.trackEvent(e.$options.EVENT_CLICK_COMMANDS_SUB_MENU_IN_COMMAND_PALETTE)},hidden:e.emitHidden},scopedSlots:e._u([{key:"toggle",fn:function(){return[t("button",{staticClass:"gl-rounded-base gl-border-0"},[t("gl-sprintf",{attrs:{message:e.$options.i18n.button},scopedSlots:e._u([{key:"superKey",fn:function(){return[t("kbd",{staticClass:"vertical-align-normalization gl-py-2 gl-text-base"},[e._v(e._s(e.modKey))])]},proxy:!0},{key:"link2",fn:function({content:n}){return[t("kbd",{staticClass:"vertical-align-normalization gl-py-2 gl-text-base"},[e._v(e._s(n))])]}}])})],1)]},proxy:!0},{key:"header",fn:function(){return[t("span",{staticClass:"gl-border-b-1 gl-border-gray-200 gl-p-4 gl-border-b-solid"},[e._v("\n        "+e._s(e.$options.i18n.header)+"\n      ")])]},proxy:!0},{key:"list-item",fn:function({item:n}){return[t("span",{staticClass:"gl-flex gl-items-center gl-justify-between"},[t("span",{attrs:{"data-testid":"listbox-item-text"}},[e._v(e._s(n.text))]),e._v(" "),t("kbd",[e._v(e._s(n.value))])])]}}])})],1)}),[],!1,null,null,null).exports,me=n("dsWN"),he={name:"SearchResultHoverLayover",components:{GlSprintf:re.a},props:{textMessage:{type:String,required:!0}}},pe=Object(D.a)(he,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"gl-flex gl-min-w-0 gl-items-center gl-justify-between gl-gap-3"},[t("span",{staticClass:"gl-flex gl-min-w-0 gl-grow gl-gap-3"},[e._t("default")],2),e._v(" "),t("span",{staticClass:"show-hover-layover-hint gl-hidden gl-items-center gl-justify-end gl-opacity-0 sm:gl-flex"},[t("span",{staticClass:"gl-whitespace-nowrap gl-text-gray-700",attrs:{"data-testid":"overlay-message"}},[t("gl-sprintf",{attrs:{message:e.textMessage},scopedSlots:e._u([{key:"kbd",fn:function({content:n}){return[t("kbd",{staticClass:"vertical-align-normalization gl-pb-3 gl-align-middle gl-text-base"},[e._v("\n            "+e._s(n)+"\n          ")])]}}])})],1)])])}),[],!1,null,null,null).exports,_e={name:"GlobalSearchNoResults",i18n:{NO_SEARCH_RESULTS:_.A}},fe=Object(D.a)(_e,(function(){var e=this._self._c;return e("ul",{staticClass:"gl-m-0 gl-list-none gl-p-0"},[e("li",{staticClass:"command-palette-px gl-py-5 gl-text-primary"},[this._v("\n    "+this._s(this.$options.i18n.NO_SEARCH_RESULTS)+"\n  ")])])}),[],!1,null,null,null).exports;const ge=u.a.mixin();var ve={name:"GlobalSearchAutocompleteItems",i18n:{AUTOCOMPLETE_ERROR_MESSAGE:_.b,NO_SEARCH_RESULTS:_.A,OVERLAY_GOTO:A.p,OVERLAY_PROFILE:A.q,OVERLAY_PROJECT:A.r,OVERLAY_FILE:A.o,USERS_GROUP_TITLE:A.I,PROJECTS_GROUP_TITLE:A.w,ISSUES_GROUP_TITLE:A.h,PAGES_GROUP_TITLE:A.t,GROUPS_GROUP_TITLE:A.f,MERGE_REQUESTS_GROUP_TITLE:Object(h.g)("GlobalSearch|Merge Requests"),RECENT_ISSUES_GROUP_TITLE:Object(h.g)("GlobalSearch|Recent issues"),RECENT_EPICS_GROUP_TITLE:Object(h.g)("GlobalSearch|Recent epics"),RECENT_MERGE_REQUESTS_GROUP_TITLE:Object(h.g)("GlobalSearch|Recent merge requests")},components:{GlAvatar:R.a,GlAlert:me.a,GlLoadingIcon:k.a,GlDisclosureDropdownGroup:y.a,SearchResultHoverLayover:pe,GlobalSearchNoResults:fe},directives:{SafeHtml:L.a},mixins:[ge],computed:{...Object(c.f)(["search","loading","autocompleteError"]),...Object(c.d)(["autocompleteGroupedSearchOptions","scopedSearchOptions"]),groups(){return this.autocompleteGroupedSearchOptions.map((function(e){var t;return{name:null==e?void 0:e.name,items:null==e||null===(t=e.items)||void 0===t?void 0:t.map((function(e){return{...e,extraAttrs:{class:"show-hover-layover gl-flex gl-items-center gl-justify-between"}}}))}}))},hasResults(){var e;return(null===(e=this.autocompleteGroupedSearchOptions)||void 0===e?void 0:e.length)>0},hasNoResults(){return!this.hasResults&&!this.autocompleteError}},methods:{highlightedName(e){return Object(j.a)(e,this.search)},overlayText(e){let t=A.p;switch(e){case this.$options.i18n.USERS_GROUP_TITLE:t=this.$options.i18n.OVERLAY_PROFILE;break;case this.$options.i18n.PROJECTS_GROUP_TITLE:t=this.$options.i18n.OVERLAY_PROJECT;break;case this.$options.i18n.ISSUES_GROUP_TITLE:t=this.$options.i18n.OVERLAY_GOTO;break;case this.$options.i18n.PAGES_GROUP_TITLE:t=this.$options.i18n.OVERLAY_FILE}return t},trackingTypes({name:e}){switch(e){case this.$options.i18n.PROJECTS_GROUP_TITLE:this.trackEvent("click_project_result_in_command_palette");break;case this.$options.i18n.GROUPS_GROUP_TITLE:this.trackEvent("click_group_result_in_command_palette");break;case this.$options.i18n.MERGE_REQUESTS_GROUP_TITLE:this.trackEvent("click_merge_request_result_in_command_palette");break;case this.$options.i18n.ISSUES_GROUP_TITLE:this.trackEvent("click_issue_result_in_command_palette");break;case this.$options.i18n.RECENT_ISSUES_GROUP_TITLE:this.trackEvent("click_recent_issue_result_in_command_palette");break;case this.$options.i18n.RECENT_EPICS_GROUP_TITLE:this.trackEvent("click_recent_epic_result_in_command_palette");break;case this.$options.i18n.RECENT_MERGE_REQUESTS_GROUP_TITLE:this.trackEvent("click_recent_merge_request_result_in_command_palette");break;default:this.trackEvent("click_user_result_in_command_palette")}}},AVATAR_SHAPE_OPTION_RECT:N.a},Ee=Object(D.a)(ve,(function(){var e=this,t=e._self._c;return t("div",[e.autocompleteError?t("gl-alert",{staticClass:"gl-mt-2 gl-text-primary",attrs:{dismissible:!1,variant:"danger"}},[e._v("\n    "+e._s(e.$options.i18n.AUTOCOMPLETE_ERROR_MESSAGE)+"\n  ")]):e._e(),e._v(" "),!e.loading&&e.hasResults?t("ul",{staticClass:"gl-m-0 gl-list-none gl-p-0"},e._l(e.groups,(function(n,r){return t("gl-disclosure-dropdown-group",{key:n.name,class:{"!gl-mt-0":0===r},attrs:{group:n,bordered:""},on:{action:e.trackingTypes},scopedSlots:e._u([{key:"list-item",fn:function({item:r}){return[t("search-result-hover-layover",{attrs:{"text-message":e.overlayText(n.name)}},[void 0!==r.avatar_url?t("gl-avatar",{attrs:{src:r.avatar_url,"entity-id":r.entity_id,"entity-name":r.entity_name,size:r.avatar_size,shape:e.$options.AVATAR_SHAPE_OPTION_RECT,"aria-hidden":"true"}}):e._e(),e._v(" "),t("span",{staticClass:"gl-flex gl-min-w-0 gl-grow gl-flex-col"},[t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.highlightedName(r.text),expression:"highlightedName(item.text)"}],staticClass:"gl-truncate gl-text-gray-900",attrs:{"data-testid":"autocomplete-item-name"}}),e._v(" "),r.value?t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:r.namespace,expression:"item.namespace"}],staticClass:"gl-truncate gl-text-sm gl-text-gray-500",attrs:{"data-testid":"autocomplete-item-namespace"}}):e._e()])],1)]}}],null,!0)})})),1):e._e(),e._v(" "),e.loading?t("gl-loading-icon",{staticClass:"gl-my-6",attrs:{size:"lg"}}):e._e(),e._v(" "),e.hasNoResults?t("global-search-no-results"):e._e()],1)}),[],!1,null,null,null).exports,Se=(n("B++/"),n("47t/"),n("wCL9")),be=n.n(Se);const Oe=u.a.mixin();var ye={name:"DefaultPlaces",i18n:{PLACES:_.B,OVERLAY_CHANGE_CONTEXT:A.n,YOUR_WORK_TITLE:Object(h.g)("GlobalSearch|Your work"),EXPLORE_TITLE:Object(h.g)("GlobalSearch|Explore"),PROFILE_TITLE:Object(h.g)("GlobalSearch|Profile"),PREFERENCES_TITLE:Object(h.g)("GlobalSearch|Preferences")},components:{GlDisclosureDropdownGroup:y.a,SearchResultHoverLayover:pe},mixins:[Oe],inject:["contextSwitcherLinks"],computed:{shouldRender(){return this.contextSwitcherLinks.length>0},group(){return{name:this.$options.i18n.PLACES,items:this.contextSwitcherLinks.map((function({title:e,link:t,...n}){return{text:e,href:t,extraAttrs:{"data-track-action":A.G,"data-track-label":H.x,"data-track-property":H.y,"data-track-extra":JSON.stringify({title:e}),"data-testid":"places-item-link","data-qa-places-item":e,class:"show-hover-layover",...Object.entries(n).reduce((function(e,[t,n]){return t.startsWith("data")&&(e[be()(t)]=n),e}),{})}}}))}}},created(){this.shouldRender||this.$emit("nothing-to-render")},methods:{trackingTypes({text:e}){switch(e){case this.$options.i18n.YOUR_WORK_TITLE:this.trackEvent("click_your_work_in_command_palette");break;case this.$options.i18n.EXPLORE_TITLE:this.trackEvent("click_explore_in_command_palette");break;case this.$options.i18n.PROFILE_TITLE:this.trackEvent("click_profile_in_command_palette");break;case this.$options.i18n.PREFERENCES_TITLE:this.trackEvent("click_preferences_in_command_palette")}}}},ke=Object(D.a)(ye,(function(){var e=this,t=e._self._c;return e.shouldRender?t("gl-disclosure-dropdown-group",e._b({attrs:{group:e.group},on:{action:e.trackingTypes},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("search-result-hover-layover",{attrs:{"text-message":e.$options.i18n.OVERLAY_CHANGE_CONTEXT}},[t("span",[e._v(e._s(n.text))])])]}}],null,!1,3096787143)},"gl-disclosure-dropdown-group",e.$attrs,!1)):e._e()}),[],!1,null,null,null).exports;const Ce=u.a.mixin();var Te={name:"DefaultIssuables",i18n:{ALL_GITLAB:_.a,OVERLAY_GOTO:A.p,ISSUES_ASSIGNED_TO_ME_TITLE:Object(h.g)("GlobalSearch|Issues assigned to me"),ISSUES_I_HAVE_CREATED_TITLE:Object(h.g)("GlobalSearch|Issues I've created"),MERGE_REQUESTS_THAT_I_AM_A_REVIEWER:Object(h.g)("GlobalSearch|Merge requests that I'm a reviewer"),MERGE_REQUESTS_I_HAVE_CREATED_TITLE:Object(h.g)("GlobalSearch|Merge requests I've created"),MERGE_REQUESTS_ASSIGNED_TO_ME_TITLE:Object(h.g)("GlobalSearch|Merge requests assigned to me")},components:{GlDisclosureDropdownGroup:y.a,SearchResultHoverLayover:pe},mixins:[Ce],computed:{...Object(c.f)(["searchContext"]),...Object(c.d)(["defaultSearchOptions"]),currentContextName(){var e,t;return(null===(e=this.searchContext)||void 0===e||null===(e=e.project)||void 0===e?void 0:e.name)||(null===(t=this.searchContext)||void 0===t||null===(t=t.group)||void 0===t?void 0:t.name)||this.$options.i18n.ALL_GITLAB},shouldRender(){return this.group.items.length>0},group(){var e;return{name:this.currentContextName,items:null===(e=this.defaultSearchOptions)||void 0===e?void 0:e.map((function(e){return{...e,extraAttrs:{class:"show-hover-layover"}}}))}}},created(){this.shouldRender||this.$emit("nothing-to-render")},methods:{trackingTypes({text:e}){switch(e){case this.$options.i18n.ISSUES_ASSIGNED_TO_ME_TITLE:this.trackEvent("click_issues_assigned_to_me_in_command_palette");break;case this.$options.i18n.ISSUES_I_HAVE_CREATED_TITLE:this.trackEvent("click_issues_i_created_in_command_palette");break;case this.$options.i18n.MERGE_REQUESTS_ASSIGNED_TO_ME_TITLE:this.trackEvent("click_merge_requests_assigned_to_me_in_command_palette");break;case this.$options.i18n.MERGE_REQUESTS_THAT_I_AM_A_REVIEWER:this.trackEvent("click_merge_requests_that_im_a_reviewer_in_command_palette");break;case this.$options.i18n.MERGE_REQUESTS_I_HAVE_CREATED_TITLE:this.trackEvent("click_merge_requests_i_created_in_command_palette")}}}},xe=Object(D.a)(Te,(function(){var e=this,t=e._self._c;return e.shouldRender?t("gl-disclosure-dropdown-group",e._b({attrs:{group:e.group},on:{action:e.trackingTypes},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("search-result-hover-layover",{attrs:{"text-message":e.$options.i18n.OVERLAY_GOTO}},[t("span",[e._v(e._s(n.text))])])]}}],null,!1,2103025810)},"gl-disclosure-dropdown-group",e.$attrs,!1)):e._e()}),[],!1,null,null,null).exports,Ie=n("Eqlq"),Ae=n.n(Ie),Re=n("XiQx"),we=n("0AwG"),Le=n("3lQS"),je={name:"FrequentlyVisitedItem",i18n:{OVERLAY_GOTO:A.p},components:{ProjectAvatar:Le.a,SearchResultHoverLayover:pe},props:{item:{type:Object,required:!0}}},Ne=Object(D.a)(je,(function(){var e=this,t=e._self._c;return t("search-result-hover-layover",{attrs:{"text-message":e.$options.i18n.OVERLAY_GOTO}},[t("project-avatar",{attrs:{"project-id":e.item.id,"project-name":e.item.title,"project-avatar-url":e.item.avatar,size:32,"aria-hidden":"true"}}),e._v(" "),t("div",{staticClass:"gl-grow gl-truncate"},[e._v("\n    "+e._s(e.item.title)+"\n    "),e.item.subtitle?t("div",{staticClass:"gl-truncate gl-text-sm gl-text-gray-500",attrs:{"data-testid":"subtitle"}},[e._v("\n      "+e._s(e.item.subtitle)+"\n    ")]):e._e()])],1)}),[],!1,null,null,null).exports,Pe={components:{GlSkeletonLoader:n("4+8U").a}},De=Object(D.a)(Pe,(function(){var e=this._self._c;return e("gl-skeleton-loader",{attrs:{width:737,height:48}},[e("rect",{attrs:{width:"24",height:"24",y:"12",x:"8"}}),this._v(" "),e("rect",{attrs:{width:"120",height:"12",y:"10",x:"36"}}),this._v(" "),e("rect",{attrs:{width:"100",height:"12",y:"26",x:"36"}})])}),[],!1,null,null,null).exports,Ge={name:"FrequentlyVisitedItems",i18n:{OVERLAY_GOTO:A.p},components:{GlDisclosureDropdownGroup:y.a,GlDisclosureDropdownItem:Re.b,GlIcon:w.a,FrequentItem:Ne,FrequentItemSkeleton:De,SearchResultHoverLayover:pe},props:{loading:{type:Boolean,required:!1,default:!1},emptyStateText:{type:String,required:!0},groupName:{type:String,required:!0},viewAllItemsText:{type:String,required:!0},viewAllItemsIcon:{type:String,required:!0},viewAllItemsPath:{type:String,required:!1,default:null},items:{type:Array,required:!1,default:function(){return[]}}},computed:{formattedItems(){return this.items.map((function(e){return{forDropdown:{id:e.id,text:e.name,href:e.webUrl,extraAttrs:{"data-track-action":A.G,"data-track-label":e.id,"data-track-property":H.y,"data-track-extra":JSON.stringify({title:e.name})}},forRenderer:{id:e.id,title:e.name,subtitle:Object(we.D)(e.namespace),avatar:e.avatarUrl}}}))},showEmptyState(){return!this.loading&&0===this.formattedItems.length},viewAllItem(){return{text:this.viewAllItemsText,href:this.viewAllItemsPath}}}},Ue=Object(D.a)(Ge,(function(){var e=this,t=e._self._c;return t("gl-disclosure-dropdown-group",e._b({scopedSlots:e._u([{key:"group-label",fn:function(){return[e._v(e._s(e.groupName))]},proxy:!0}])},"gl-disclosure-dropdown-group",e.$attrs,!1),[e._v(" "),e.loading?t("gl-disclosure-dropdown-item",[t("frequent-item-skeleton")],1):e._l(e.formattedItems,(function(n){return t("gl-disclosure-dropdown-item",{key:n.forDropdown.id,staticClass:"show-on-focus-or-hover--context show-hover-layover",attrs:{item:n.forDropdown},on:{action:function(t){return e.$emit("action")}},scopedSlots:e._u([{key:"list-item",fn:function(){return[t("frequent-item",{attrs:{item:n.forRenderer}})]},proxy:!0}],null,!0)})})),e._v(" "),e.showEmptyState?t("gl-disclosure-dropdown-item",{staticClass:"gl-cursor-text"},[t("span",{staticClass:"gl-mx-3 gl-my-3 gl-text-sm gl-text-gray-500"},[e._v(e._s(e.emptyStateText))])]):e._e(),e._v(" "),t("gl-disclosure-dropdown-item",{key:"all",staticClass:"show-hover-layover",attrs:{item:e.viewAllItem},scopedSlots:e._u([{key:"list-item",fn:function(){return[t("search-result-hover-layover",{attrs:{"text-message":e.$options.i18n.OVERLAY_GOTO}},[t("gl-icon",{staticClass:"!gl-w-6",attrs:{name:e.viewAllItemsIcon}}),e._v("\n        "+e._s(e.viewAllItemsText)+"\n      ")],1)]},proxy:!0}])})],2)}),[],!1,null,null,null).exports,$e={name:"FrequentlyVisitedGroups",apollo:{frecentGroups:{query:Ae.a}},components:{FrequentItems:Ue},inject:["groupsPath"],i18n:{groupName:Object(h.g)("Navigation|Frequently visited groups"),viewAllText:Object(h.g)("Navigation|View all my groups"),emptyStateText:Object(h.g)("Navigation|Groups you visit often will appear here.")},FREQUENTLY_VISITED_GROUPS_HANDLE:A.c},Fe=Object(D.a)($e,(function(){var e=this;return(0,e._self._c)("frequent-items",e._g(e._b({attrs:{loading:e.$apollo.queries.frecentGroups.loading,"empty-state-text":e.$options.i18n.emptyStateText,"group-name":e.$options.i18n.groupName,items:e.frecentGroups,"view-all-items-icon":"group","view-all-items-text":e.$options.i18n.viewAllText,"view-all-items-path":e.groupsPath},on:{action:function(t){return e.$emit("action",e.$options.FREQUENTLY_VISITED_GROUPS_HANDLE)}}},"frequent-items",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null).exports,Me=n("erDj"),He={name:"FrequentlyVisitedProjects",apollo:{frecentProjects:{query:n.n(Me).a}},components:{FrequentItems:Ue},inject:["projectsPath"],i18n:{groupName:Object(h.g)("Navigation|Frequently visited projects"),viewAllText:Object(h.g)("Navigation|View all my projects"),emptyStateText:Object(h.g)("Navigation|Projects you visit often will appear here.")},FREQUENTLY_VISITED_PROJECTS_HANDLE:A.d};const qe=[ke,Object(D.a)(He,(function(){var e=this;return(0,e._self._c)("frequent-items",e._g(e._b({attrs:{loading:e.$apollo.queries.frecentProjects.loading,"empty-state-text":e.$options.i18n.emptyStateText,"group-name":e.$options.i18n.groupName,items:e.frecentProjects,"view-all-items-icon":"project","view-all-items-text":e.$options.i18n.viewAllText,"view-all-items-path":e.projectsPath},on:{action:function(t){return e.$emit("action",e.$options.FREQUENTLY_VISITED_PROJECTS_HANDLE)}}},"frequent-items",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null).exports,Fe,xe];var Ve={name:"GlobalSearchDefaultItems",mixins:[u.a.mixin()],data:()=>({componentNames:qe.map((function({name:e}){return e}))}),methods:{componentFromName:e=>qe.find((function(t){return t.name===e})),remove(e){const t=this.componentNames.findIndex((function(t){return t===e}));-1!==t&&this.componentNames.splice(t,1)},attrs:e=>0===e?null:{bordered:!0,class:"gl-mt-3"},trackItems(e){switch(e){case A.d:this.trackEvent("click_frequent_project_in_command_palette");break;case A.c:this.trackEvent("click_frequent_group_in_command_palette")}}}},Qe=Object(D.a)(Ve,(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"gl-p-0 gl-m-0 gl-pt-2 gl-list-none"},e._l(e.componentNames,(function(n,r){return t(e.componentFromName(n),e._b({key:n,tag:"component",on:{"nothing-to-render":function(t){return e.remove(n)},action:e.trackItems}},"component",e.attrs(r),!1))})),1)}),[],!1,null,null,null).exports;const Be=u.a.mixin();var Ye={name:"GlobalSearchScopedItems",components:{GlIcon:w.a,GlDisclosureDropdownGroup:y.a,SearchResultHoverLayover:pe},mixins:[Be],i18n:{OVERLAY_SEARCH:A.s},computed:{...Object(c.f)(["search"]),...Object(c.d)(["scopedSearchGroup"]),group(){return{name:this.scopedSearchGroup.name,items:this.scopedSearchGroup.items.map((function(e){return{...e,href:e.text===A.A?Object(E.d)(e.href):e.href,scopeName:e.scope||e.description,extraAttrs:{class:"show-hover-layover"}}}))}}},methods:{titleLabel(e){return Object(h.h)(Object(h.g)("GlobalSearch|in %{scope}"),{search:this.search,scope:e.scope||e.description})},getTruncatedScope:e=>Object(we.C)(e,S.g),trackingTypes({text:e}){switch(e){case this.$options.SCOPE_SEARCH_ALL:this.trackEvent("click_all_gitlab_scoped_search_to_advanced_search");break;case this.$options.SCOPE_SEARCH_GROUP:this.trackEvent("click_group_scoped_search_to_advanced_search");break;case this.$options.SCOPE_SEARCH_PROJECT:this.trackEvent("click_project_scoped_search_to_advanced_search")}}},SCOPE_SEARCH_ALL:A.y,SCOPE_SEARCH_GROUP:A.z,SCOPE_SEARCH_PROJECT:A.A},Je=Object(D.a)(Ye,(function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"gl-m-0 gl-list-none gl-p-0 gl-pb-2",attrs:{"data-testid":"scoped-items"}},[t("gl-disclosure-dropdown-group",{attrs:{group:e.group,bordered:""},on:{action:e.trackingTypes},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("search-result-hover-layover",{attrs:{"text-message":e.$options.i18n.OVERLAY_SEARCH}},[t("gl-icon",{staticClass:"-gl-mt-2 gl-mr-2 gl-flex-shrink-0 gl-pt-2 gl-text-gray-500",attrs:{name:"search-results"}}),e._v(" "),t("span",{staticClass:"gl-grow"},[e._v("\n            "+e._s(n.scopeName)+"\n          ")])],1)]}}])})],1)])}),[],!1,null,null,null).exports;const ze=u.a.mixin();var Ke={name:"GlobalSearchModal",SEARCH_MODAL_ID:S.j,i18n:{COMMAND_PALETTE:_.c,SEARCH_DESCRIBED_BY_WITH_RESULTS:_.G,SEARCH_DESCRIBED_BY_DEFAULT:_.E,SEARCH_DESCRIBED_BY_UPDATED:_.F,SEARCH_OR_COMMAND_MODE_PLACEHOLDER:A.B,SEARCH_RESULTS_LOADING:_.H,MIN_SEARCH_TERM:_.t,COMMAND_PALETTE_TIP:_.k,COMMON_HANDLES:A.b},components:{GlSearchBoxByType:o.a,GlobalSearchDefaultItems:Qe,GlobalSearchScopedItems:Je,GlobalSearchAutocompleteItems:Ee,GlModal:l.a,CommandPaletteItems:Y,FakeSearchInput:ee,CommandPaletteLottery:ae,ScrollScrim:v.a,CommandsOverviewDropdown:de},mixins:[ze,f.a],data:()=>({nextFocusedItemIndex:null,commandPaletteDropdownItems:I.a,commandPaletteDropdownOpen:!1}),computed:{...Object(c.f)(["search","loading","searchContext","commandChar"]),...Object(c.d)(["searchQuery","searchOptions","scopedSearchOptions","isCommandMode"]),searchText:{get(){return this.search},set(e){if(this.stringHasCommand(e))return this.setCommand(this.stringFirstChar(e)),void this.setSearch(e);this.setCommand(""),this.setSearch(e)}},showDefaultItems(){return!this.searchText},searchTermOverMin(){var e;return(null===(e=this.searchText)||void 0===e?void 0:e.length)>S.m},showScopedSearchItems(){return this.searchTermOverMin&&this.scopedSearchOptions.length>0},searchResultsDescription(){return this.showDefaultItems?Object(h.h)(this.$options.i18n.SEARCH_DESCRIBED_BY_DEFAULT,{count:this.searchOptions.length}):this.searchTermOverMin?this.loading?this.$options.i18n.SEARCH_RESULTS_LOADING:Object(h.h)(this.$options.i18n.SEARCH_DESCRIBED_BY_UPDATED,{count:this.searchOptions.length}):this.$options.i18n.MIN_SEARCH_TERM},searchBarItem(){var e;return null===(e=this.searchOptions)||void 0===e?void 0:e[0]},commandPaletteQuery(){var e;return this.isCommandMode?null===(e=this.searchText)||void 0===e?void 0:e.trim().substring(1):""},commandHighlightClass:()=>Object(g.a)()?"!gl-bg-gray-10":"!gl-bg-gray-50"},watch:{nextFocusedItemIndex(){this.highlightFirstCommand()}},methods:{...Object(c.c)(["setSearch","setCommand","fetchAutocompleteOptions","clearAutocomplete"]),getAutocompleteOptions:a()((function(e){this.isCommandMode||(e?this.fetchAutocompleteOptions():this.clearAutocomplete())}),m.h),getFocusableOptions(){var e;return Array.from((null===(e=this.$refs.resultsList)||void 0===e?void 0:e.querySelectorAll(S.l))||[])},handleSubmitSearch(e){this.submitSearch(),e.stopPropagation(),e.preventDefault()},onKeydown(e){const{code:t,target:n}=e;let r=!0;const s=n&&(null==n?void 0:n.matches(S.i)),i=this.getFocusableOptions();switch(t){case p.e:case p.h:this.trackEvent("press_enter_to_advanced_search",{label:"command_palette"}),this.handleSubmitSearch(e);break;case p.g:if(s)return;if(i.length<1)return;this.focusItem(0,i);break;case p.d:if(s)return;if(i.length<1)return;this.focusItem(i.length-1,i);break;case p.b:if(s)return;if(i.length<1)return;0===i.indexOf(n)?this.focusSearchInput():this.focusNextItem(e,i,-1);break;case p.a:if(i.length<1)return;this.focusNextItem(e,i,1);break;case p.f:this.$refs.modal.close();break;default:r=!1}r&&e.preventDefault()},onKeyComboDown(e){const{code:t,metaKey:n}=e;t===S.e&&n&&(this.commandPaletteDropdownOpen?(this.$refs.commandDropdown.close(),this.commandPaletteDropdownOpen=!1):(this.$refs.commandDropdown.open(),this.commandPaletteDropdownOpen=!0))},handleClosing(){this.commandPaletteDropdownOpen=!1},focusSearchInput(){var e;null===(e=this.$refs.searchInput.$el.querySelector("input"))||void 0===e||e.focus()},focusNextItem(e,t,n){const{target:r}=e,i=t.indexOf(r),a=s()(i+n,0,t.length-1);this.focusItem(a,t)},focusItem(e,t){var n;this.nextFocusedItemIndex=e,null===(n=t[e])||void 0===n||n.focus()},submitSearch(){var e;this.isCommandMode?this.runFirstCommand():(null===(e=this.search)||void 0===e?void 0:e.length)<=S.m||Object(d.V)(Object(E.d)(this.searchQuery))},runFirstCommand(){var e;null===(e=this.getFocusableOptions()[0])||void 0===e||null===(e=e.firstChild)||void 0===e||e.click()},onSearchModalShown(){this.$emit("shown"),window.addEventListener("keydown",this.onKeyComboDown)},onSearchModalHidden({trigger:e}={}){switch(this.searchText="",this.$emit("hidden"),window.removeEventListener("keydown",this.onKeyComboDown),e){case this.$options.MODAL_CLOSE_ESC:case this.$options.MODAL_CLOSE_HEADERCLOSE:this.trackEvent("press_escape_in_command_palette");break;case this.$options.MODAL_CLOSE_BACKGROUND:this.trackEvent("click_outside_of_command_palette")}},highlightFirstCommand(){if(this.isCommandMode){var e;const t=null===(e=this.getFocusableOptions()[0])||void 0===e?void 0:e.firstChild;null==t||t.classList.toggle(this.commandHighlightClass,Boolean(!this.nextFocusedItemIndex))}},handleCommandSelection(e){switch(this.searchText=this.stringHasCommand(this.searchText)?`${e}${this.searchText.slice(1)}`:`${e}${this.searchText}`,this.focusSearchInput(),e){case this.$options.COMMAND_HANDLE:this.trackEvent("press_greater_than_in_command_palette");break;case this.$options.USER_HANDLE:this.trackEvent("press_at_symbol_in_command_palette");break;case this.$options.PROJECT_HANDLE:this.trackEvent("press_colon_in_command_palette");break;case this.$options.PATH_HANDLE:this.trackEvent("press_forward_slash_in_command_palette")}},stringHasCommand(e){var t;const n=function(t){return t===(null==e?void 0:e.trim().charAt(0))};return A.b.some(n)||(null===(t=this.searchContext)||void 0===t?void 0:t.project)&&A.b.some(n)},stringFirstChar:e=>null==e?void 0:e.trim().charAt(0)},SEARCH_INPUT_DESCRIPTION:S.h,SEARCH_RESULTS_DESCRIPTION:S.k,COMMAND_HANDLE:A.a,USER_HANDLE:A.J,PROJECT_HANDLE:A.x,ISSUE_HANDLE:A.i,PATH_HANDLE:A.v,MODAL_CLOSE_ESC:A.l,MODAL_CLOSE_BACKGROUND:A.k,MODAL_CLOSE_HEADERCLOSE:A.m},Xe=n("fFd+"),We=n.n(Xe),Ze={insert:"head",singleton:!1},et=(K()(We.a,Ze),We.a.locals,Object(D.a)(Ke,(function(){var e=this,t=e._self._c;return t("gl-modal",{ref:"modal",attrs:{"modal-id":e.$options.SEARCH_MODAL_ID,"hide-header":"","hide-header-close":"",scrollable:"",title:e.$options.i18n.COMMAND_PALETTE,"body-class":"!gl-p-0 !gl-min-h-26","modal-class":"global-search-modal",centered:!1},on:{shown:e.onSearchModalShown,hide:e.onSearchModalHidden},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[t("div",{staticClass:"gl-m-0 gl-flex gl-grow gl-justify-between gl-align-middle"},[t("span",{staticClass:"gl-text-gray-500"},[e._v(e._s(e.$options.i18n.COMMAND_PALETTE_TIP)+" "),t("command-palette-lottery")],1),e._v(" "),t("span",[t("commands-overview-dropdown",{ref:"commandDropdown",attrs:{items:e.commandPaletteDropdownItems},on:{selected:e.handleCommandSelection,hidden:e.handleClosing}})],1)])]},proxy:!0}])},[t("form",{staticClass:"gl-relative gl-w-full gl-rounded-lg gl-pb-0",attrs:{role:"search","aria-label":e.$options.i18n.SEARCH_OR_COMMAND_MODE_PLACEHOLDER}},[t("div",{staticClass:"input-box-wrapper gl-border-b -gl-mb-1 gl-bg-white gl-p-2"},[t("gl-search-box-by-type",{ref:"searchInput",attrs:{id:"search",role:"searchbox","data-testid":"global-search-input",autocomplete:"off",placeholder:e.$options.i18n.SEARCH_OR_COMMAND_MODE_PLACEHOLDER,"aria-describedby":e.$options.SEARCH_INPUT_DESCRIPTION,borderless:""},on:{input:e.getAutocompleteOptions,keydown:e.onKeydown},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),e._v(" "),t("span",{staticClass:"gl-sr-only",attrs:{id:e.$options.SEARCH_INPUT_DESCRIPTION,role:"region"}},[e._v("\n        "+e._s(e.$options.i18n.SEARCH_DESCRIBED_BY_WITH_RESULTS)+"\n      ")]),e._v(" "),e.isCommandMode?t("fake-search-input",{staticClass:"fake-input-wrapper",attrs:{"user-input":e.commandPaletteQuery,scope:e.commandChar}}):e._e()],1),e._v(" "),t("span",{staticClass:"gl-sr-only",attrs:{role:"region","data-testid":e.$options.SEARCH_RESULTS_DESCRIPTION,"aria-live":"polite","aria-atomic":"true"}},[e._v("\n      "+e._s(e.searchResultsDescription)+"\n    ")]),e._v(" "),t("div",{ref:"resultsList",staticClass:"global-search-results gl-flex gl-w-full gl-grow gl-flex-col gl-overflow-hidden",on:{keydown:e.onKeydown}},[t("scroll-scrim",{staticClass:"gl-grow !gl-overflow-x-hidden",attrs:{"data-testid":"nav-container"}},[t("div",{staticClass:"gl-pb-3"},[e.isCommandMode?t("command-palette-items",{attrs:{"search-query":e.commandPaletteQuery,handle:e.commandChar},on:{updated:e.highlightFirstCommand}}):e.showDefaultItems?t("global-search-default-items"):[t("global-search-autocomplete-items"),e._v(" "),e.showScopedSearchItems?t("global-search-scoped-items"):e._e()]],2)])],1),e._v(" "),e.searchContext?[e.searchContext.group?t("input",{attrs:{type:"hidden",name:"group_id"},domProps:{value:e.searchContext.group.id}}):e._e(),e._v(" "),e.searchContext.project?t("input",{attrs:{type:"hidden",name:"project_id"},domProps:{value:e.searchContext.project.id}}):e._e(),e._v(" "),e.searchContext.group||e.searchContext.project?[t("input",{attrs:{type:"hidden",name:"scope"},domProps:{value:e.searchContext.scope}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"search_code"},domProps:{value:e.searchContext.code_search}})]:e._e(),e._v(" "),t("input",{attrs:{type:"hidden",name:"snippets"},domProps:{value:e.searchContext.for_snippets}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"repository_ref"},domProps:{value:e.searchContext.ref}})]:e._e()],2)])}),[],!1,null,"04c76396",null));t.default=et.exports},dnFX:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l}));var r=n("/lV4");const s=0,i=0,a="label-search-input-description",o="label-search-results-description",l={header:Object(r.a)("Labels"),scopes:{ISSUES:"issues"},filterParam:"labels"}},dowq:function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"g",(function(){return E})),n.d(t,"e",(function(){return S})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"h",(function(){return k})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return T}));var r=n("Q33P"),s=n.n(r),i=n("GHFj"),a=n.n(i),o=n("VNnR"),l=n.n(o),c=(n("3UXl"),n("iyoE"),n("byxs"),n("v2fZ"),n("B++/"),n("z6RN"),n("47t/"),n("aFm2"),n("R9qC"),n("lFMf"),n("gOHk"),n("c9hT"),n("dHQd"),n("yoDG"),n("KeS/"),n("tWNI"),n("8d6S"),n("VwWG"),n("IYHS"),n("rIA9"),n("MViX"),n("zglm"),n("GDOA"),n("hlbI"),n("a0mT"),n("u3H1"),n("ta8/"),n("IKCR"),n("nmTw"),n("W2kU"),n("58fc"),n("7dtT"),n("Rhav"),n("uhEP"),n("eppl"),n("n7CP")),u=n("/lV4"),d=n("3twG"),m=n("W+L/"),h=n("9lRJ");const p=m.c.filterParam;function _(e,t){return Object.fromEntries(t.map((function(t){return[t,e[t]]})))}const f=function(e){if(!c.a.canUseLocalStorage())return null;try{return JSON.parse(localStorage.getItem(e))||null}catch{return localStorage.removeItem(e),null}},g=function(e,t){if(!c.a.canUseLocalStorage())return null;try{return localStorage.setItem(e,JSON.stringify(t)),t}catch{return localStorage.removeItem(e),null}},v=function(e,t,n){if(!c.a.canUseLocalStorage())return[];const r=["id","avatar_url","name","full_name","name_with_namespace","frequency","lastUsed"];try{const s=t[e].map((function(e){return _(e,r)})),i=_(n,r),a=s.findIndex((function(e){return e.id===i.id}));if(a>=0){const e=s[a].frequency;s[a].frequency=Math.min(e+1,h.f),s[a].lastUsed=(new Date).getTime()}else s.length>=h.g&&s.pop(),s.push({...i,frequency:1,lastUsed:(new Date).getTime()});return s.sort((function(e,t){return e.frequency>t.frequency?-1:e.frequency<t.frequency?1:t.lastUsed-e.lastUsed})),localStorage.setItem(e,JSON.stringify(s)),s}catch{return localStorage.removeItem(e),[]}},E=function(e,t){return e.map((function(e){return{...(null==t?void 0:t.find((function(t){return t.id===e.id})))||{},...e}}))},S=function(e,t){return h.n.some((function(n){const r=!t[n]&&e[n],s=t[n]&&t[n]!==e[n];return Array.isArray(e[n])||Array.isArray(t[n])?!l()(e[n],t[n]):r||s}))},b=function(e){if(!e)return"0";const t="string"==typeof e?parseInt(e.replace(/,/g,""),10):e;return Object(u.c)(t,h.h)},O=function(){const e=new URL(window.location.href);return e.pathname=Object(d.D)("/search","aggregations"),e.toString()},y=function(e,t){var n;const r=(null===(n=e.query)||void 0===n?void 0:n[p])||[];if(!Array.isArray(r)||!r.length)return t;const s=new Set(r);return a()(t,[function({key:e}){return s.has(e)},"count"],["desc","desc"])},k=function(e,t){return t.map((function(t){return(null==t?void 0:t.name)===p?{...t,buckets:y(e,t.buckets)}:t}))},C=function(e=""){return e.includes("+")?"+":""},T=function(e){const t=new URL(e,Object(d.o)()),n=Object(d.I)(t.search);return f(h.e)&&(n.project_id||n.group_id)&&(n[h.j]=!0),s()(n)?t.pathname:`${t.pathname}?${Object(d.F)(n)}`}},erDj:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserFrecentProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frecentProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"namespace"},name:{kind:"Name",value:"nameWithNamespace"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:135}};n.loc.source={body:"query CurrentUserFrecentProjects {\n  frecentProjects {\n    id\n    name\n    namespace: nameWithNamespace\n    webUrl\n    avatarUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.CurrentUserFrecentProjects=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){o.add(e)})))}))}return a.forEach((function(t){var r=s(e,t);r&&n.definitions.push(r)})),n}(n,"CurrentUserFrecentProjects")},"fFd+":function(e,t,n){(e.exports=n("VNgF")(!1)).push([e.i,"\n.input-box-wrapper[data-v-04c76396] {\n  position: relative;\n}\n.fake-input-wrapper[data-v-04c76396] {\n  position: absolute;\n}\n",""])},k9RV:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("Jupn"),s=n("SeSR"),i=n("z1xw"),a=n("yi8e"),o=n("/lV4"),l=n("ygVz"),c=n("NmEs"),u=n("oNYJ");const d=l.a.mixin(),m="include_forked";var h={name:"ForksFilter",components:{GlFormCheckboxGroup:r.a,GlFormCheckbox:s.a},directives:{GlTooltip:i.a},mixins:[d],i18n:{TOOLTIP:Object(o.g)("GlobalSearch|Include search results from forked projects"),HEADER_LABEL:Object(o.g)("GlobalSearch|Forks"),CHECKBOX_LABEL:Object(o.g)("GlobalSearch|Include forks")},computed:{...Object(a.f)(["urlQuery"]),selectedFilter:{get(){var e;return[Object(c.I)(null===(e=this.urlQuery)||void 0===e?void 0:e[m])]},set(e){var t;const n=null!==(t=[...e].pop())&&void 0!==t&&t;this.setQuery({key:m,value:null==n?void 0:n.toString()})}}},methods:{...Object(a.c)(["setQuery"]),trackChange(){this.trackEvent(u.b,{property:this.urlQuery.search})}}},p=n("tBpV"),_=Object(p.a)(h,(function(){var e=this,t=e._self._c;return t("gl-form-checkbox-group",{on:{change:e.trackChange},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}},[t("div",{staticClass:"gl-mb-2 gl-text-sm gl-font-bold",attrs:{"data-testid":"archived-filter-title"}},[e._v("\n    "+e._s(e.$options.i18n.HEADER_LABEL)+"\n  ")]),e._v(" "),t("gl-form-checkbox",{staticClass:"gl-inline-flex gl-w-full gl-grow gl-justify-between",attrs:{value:!0}},[t("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:e.$options.i18n.TOOLTIP,expression:"$options.i18n.TOOLTIP"}],attrs:{"data-testid":"tooltip-checkbox-label"}},[e._v("\n      "+e._s(e.$options.i18n.CHECKBOX_LABEL)+"\n    ")])])],1)}),[],!1,null,null,null);t.b=_.exports},oNYJ:function(e,t,n){"use strict";n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"n",(function(){return o})),n.d(t,"m",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"r",(function(){return _})),n.d(t,"s",(function(){return f})),n.d(t,"t",(function(){return g})),n.d(t,"p",(function(){return v})),n.d(t,"q",(function(){return E})),n.d(t,"a",(function(){return S})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return y}));var r=n("/lV4");const s="issues",i="merge_requests",a="blobs",o="projects",l="notes",c="commits",u="milestones",d="wiki_blobs",m=["gl-flex","gl-flex-row","gl-flex-nowrap","gl-text-gray-900"],h=[...m,"gl-justify-between"],p=["gl-text-sm","gl-font-normal"],_="search:filters:click",f="Apply Filters",g="Reset Filters",v="advanced",E="zoekt",S={id:null,name:Object(r.a)("Any"),name_with_namespace:Object(r.a)("Any")},b={headerText:Object(r.a)("Filter results by group"),queryParam:"group_id",name:"name",fullName:"full_name"},O={headerText:Object(r.a)("Filter results by project"),queryParam:"project_id",name:"name",fullName:"name_with_namespace"},y="click_zoekt_include_forks_on_search_results_page"},tTlX:function(e,t,n){"use strict";var r=n("3CjL"),s=n.n(r),i=n("5tFN");t.a={methods:{getFocusableOptions(){var e;return Array.from((null===(e=this.$refs.resultsList)||void 0===e?void 0:e.querySelectorAll(".gl-new-dropdown-item"))||[])},onKeydown(e){const{code:t,target:n}=e;let r=!0;const s=this.getFocusableOptions();if(s.length<1)return;const a=n.matches('input[role="searchbox"]');if(t===i.g){if(a)return;this.focusItem(0,s)}else if(t===i.d){if(a)return;this.focusItem(s.length-1,s)}else if(t===i.b){if(a)return;0===s.indexOf(n)?this.focusSearchInput():this.focusNextItem(e,s,-1)}else if(t===i.a)this.focusNextItem(e,s,1);else if(t===i.f)this.$refs.modal.close();else if(t===i.h){var o;null===(o=e.target)||void 0===o||o.firstChild.click()}else r=!1;r&&e.preventDefault()},focusSearchInput(){var e;null===(e=this.$refs.searchInput.$el.querySelector("input"))||void 0===e||e.focus()},focusNextItem(e,t,n){const{target:r}=e,i=t.indexOf(r),a=s()(i+n,0,t.length-1);this.focusItem(a,t)},focusItem(e,t){var n;this.nextFocusedItemIndex=e,null===(n=t[e])||void 0===n||n.focus()}}}},xPX6:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=function(e=!1){var t;const n="Ctrl"+(e?"":"+");return null!==(t=window.gl)&&void 0!==t&&null!==(t=t.client)&&void 0!==t&&t.isMac?"â":n},s="https://forum.gitlab.com",i="https://docs.gitlab.com",a="https://about.gitlab.com",{forum_url:o=s,docs_url:l=i,promo_url:c=a}=window.gon}}]);
//# sourceMappingURL=global_search_modal.7b74cc5c.chunk.js.map