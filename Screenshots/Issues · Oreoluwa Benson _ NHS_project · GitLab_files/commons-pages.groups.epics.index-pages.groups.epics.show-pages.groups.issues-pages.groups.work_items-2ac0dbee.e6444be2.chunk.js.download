(this.webpackJsonp=this.webpackJsonp||[]).push([[90],{"0Zrb":function(e,t,i){var n=i("mqRG"),s=i("uLMv"),a=i("5wxO");e.exports=function(e){return s(e)?a(e):n(e)}},"0ch9":function(e,t,i){"use strict";i.d(t,"k",(function(){return n})),i.d(t,"l",(function(){return s})),i.d(t,"z",(function(){return a})),i.d(t,"y",(function(){return o})),i.d(t,"x",(function(){return r})),i.d(t,"A",(function(){return l})),i.d(t,"B",(function(){return d})),i.d(t,"K",(function(){return c})),i.d(t,"L",(function(){return u})),i.d(t,"N",(function(){return m})),i.d(t,"M",(function(){return g})),i.d(t,"D",(function(){return f})),i.d(t,"C",(function(){return v})),i.d(t,"H",(function(){return p})),i.d(t,"G",(function(){return h})),i.d(t,"F",(function(){return b})),i.d(t,"E",(function(){return k})),i.d(t,"J",(function(){return _})),i.d(t,"I",(function(){return y})),i.d(t,"T",(function(){return S})),i.d(t,"S",(function(){return w})),i.d(t,"P",(function(){return D})),i.d(t,"R",(function(){return x})),i.d(t,"O",(function(){return O})),i.d(t,"U",(function(){return N})),i.d(t,"Q",(function(){return j})),i.d(t,"g",(function(){return T})),i.d(t,"f",(function(){return C})),i.d(t,"e",(function(){return E})),i.d(t,"h",(function(){return I})),i.d(t,"d",(function(){return F})),i.d(t,"j",(function(){return P})),i.d(t,"i",(function(){return q})),i.d(t,"o",(function(){return A})),i.d(t,"n",(function(){return V})),i.d(t,"p",(function(){return R})),i.d(t,"r",(function(){return B})),i.d(t,"q",(function(){return L})),i.d(t,"m",(function(){return z})),i.d(t,"u",(function(){return G})),i.d(t,"v",(function(){return M})),i.d(t,"t",(function(){return $})),i.d(t,"s",(function(){return H})),i.d(t,"w",(function(){return W})),i.d(t,"b",(function(){return U})),i.d(t,"c",(function(){return Q})),i.d(t,"a",(function(){return K}));const n="mark",s="measure",a="snippet-view-app-start",o="snippet-edit-app-start",r="snippet-blobs-content-finished",l="snippet-blobs-content",d="webide-app-start",c="webide-file-clicked",u="webide-file-finished",m="webide-init-editor-start",g="webide-init-editor-finish",f="webide-getBranchData-start",v="webide-getBranchData-finish",p="webide-getFileData-start",h="webide-getFileData-finish",b="webide-getFiles-start",k="webide-getFiles-finish",_="webide-getProjectData-start",y="webide-getProjectData-finish",S="webide-file-loading-after-interaction",w="WebIDE: Project data",D="WebIDE: Branch data",x="WebIDE: File data",O="WebIDE: Before Vue app",N="WebIDE: Repo Editor",j="WebIDE: Fetch Files",T="mr-diffs-mark-file-tree-start",C="mr-diffs-mark-file-tree-end",E="mr-diffs-mark-diff-files-start",I="mr-diffs-mark-first-diff-file-shown",F="mr-diffs-mark-diff-files-end",P="mr-diffs-measure-file-tree-done",q="mr-diffs-measure-diff-files-done",A="pipelines-detail-links-mark-calculate-start",V="pipelines-detail-links-mark-calculate-end",R="Pipelines Detail Graph: Links Calculation",B="pipeline_graph_link_calculation_duration_seconds",L="pipeline_graph_links_total",z="pipeline_graph_links_per_job_ratio",G="blobviewer-load-viewer-start",M="blobviewer-switch-to-viewerr-start",$="blobviewer-load-viewer-finish",H="Repository File Viewer: loading the viewer",W="Repository File Viewer: switching the viewer",U="design-app-start",Q="Design Management: Before the Vue app",K="Design Management: Single image preview"},"1fc5":function(e,t,i){"use strict";var n=i("9k56"),s=i("lgrP"),a=i("3hkr"),o=i("jIK5"),r=i("VuSA"),l=i("hII5"),d=i("XREi");const c=Object(l.c)(Object(r.m)({...Object(r.k)(d.b,["size"]),ariaRole:Object(l.b)(o.r,"group"),size:Object(l.b)(o.r),tag:Object(l.b)(o.r,"div"),vertical:Object(l.b)(o.g,!1)}),a.g),u=Object(n.c)({name:a.g,functional:!0,props:c,render(e,t){let{props:i,data:n,children:a}=t;return e(i.tag,Object(s.a)(n,{class:{"btn-group":!i.vertical,"btn-group-vertical":i.vertical,["btn-group-"+i.size]:i.size},attrs:{role:i.ariaRole}}),a)}});var m=i("Pyw5");const g={name:"GlButtonGroup",components:{BButtonGroup:u}};const f=i.n(m)()({render:function(){var e=this.$createElement;return(this._self._c||e)("b-button-group",this._g(this._b({},"b-button-group",this.$attrs,!1),this.$listeners),[this._t("default")],2)},staticRenderFns:[]},void 0,g,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=f},"4ncF":function(e,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignNotePermissions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotePermissions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"adminNote"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repositionNote"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"awardEmoji"},arguments:[],directives:[]}]}}],loc:{start:0,end:96}};i.loc.source={body:"fragment DesignNotePermissions on NotePermissions {\n  adminNote\n  repositionNote\n  awardEmoji\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.DesignNotePermissions=function(e,t){var i={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=n[t]||new Set,o=new Set,r=new Set;for(a.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var n=s(e,t);n&&i.definitions.push(n)})),i}(i,"DesignNotePermissions")},"5wxO":function(e,t){var i="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+s+")"+"?",d="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[a,o,r].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),c="(?:"+[a+n+"?",n,o,r,i].join("|")+")",u=RegExp(s+"(?="+s+")|"+c+d,"g");e.exports=function(e){for(var t=u.lastIndex=0;u.test(e);)++t;return t}},"67BN":function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var n=i("3hkr"),s=i("Nzdf"),a=i("CU79"),o=i("n6Wd"),r=i("BIbq"),l=i("QiCN"),d=i("h4pE"),c=i("oTzT"),u=i("ZdEn"),m=i("gZSI"),g=i("C+ps"),f=i("VuSA"),v=i("J6+d");const p=Object(u.d)(n.k,"toggle"),h=Object(u.e)(n.k,"state"),b=Object(u.e)(n.k,"sync-state"),k=Object(u.d)(n.k,"request-state"),_=[o.c,o.h],y=e=>!Object(l.a)(["button","a"],e.tagName.toLowerCase()),S=e=>{const t=e.__BV_toggle_CLICK__;t&&(Object(u.a)(e,"click",t,a.V),Object(u.a)(e,"keydown",t,a.V)),e.__BV_toggle_CLICK__=null},w=(e,t)=>{e.__BV_toggle_HANDLER__&&t&&Object(v.a)(t).$off([h,b],e.__BV_toggle_HANDLER__),e.__BV_toggle_HANDLER__=null},D=(e,t)=>{t?(Object(c.y)(e,"collapsed"),Object(c.b)(e,"not-collapsed"),Object(c.E)(e,"aria-expanded","true")):(Object(c.y)(e,"not-collapsed"),Object(c.b)(e,"collapsed"),Object(c.E)(e,"aria-expanded","false"))},x=(e,t)=>{e[t]=null,delete e[t]},O=(e,t,i)=>{if(!s.h||!Object(d.a)(i,t))return;y(e)&&(Object(c.o)(e,"role")||Object(c.E)(e,"role","button"),Object(c.o)(e,"tabindex")||Object(c.E)(e,"tabindex","0")),D(e,e.__BV_toggle_STATE__);const n=((e,t)=>{let{modifiers:i,arg:n,value:s}=e;const a=Object(f.h)(i||{});if(s=Object(m.m)(s)?s.split(r.q):s,Object(c.t)(t.tagName,"a")){const e=Object(c.h)(t,"href")||"";r.h.test(e)&&a.push(e.replace(r.g,""))}return Object(l.b)(n,s).forEach(e=>Object(m.m)(e)&&a.push(e)),a.filter((e,t,i)=>e&&i.indexOf(e)===t)})(t,e);n.length>0?(Object(c.E)(e,"aria-controls",n.join(" ")),Object(c.F)(e,"overflow-anchor","none")):(Object(c.x)(e,"aria-controls"),Object(c.A)(e,"overflow-anchor")),Object(c.B)(()=>{((e,t)=>{if(S(e),t){const i=i=>{if(("keydown"!==i.type||Object(l.a)(_,i.keyCode))&&!Object(c.r)(e)){(e.__BV_toggle_TARGETS__||[]).forEach(e=>{Object(v.a)(t).$emit(p,e)})}};e.__BV_toggle_CLICK__=i,Object(u.b)(e,"click",i,a.V),y(e)&&Object(u.b)(e,"keydown",i,a.V)}})(e,Object(d.a)(i,t))}),Object(g.a)(n,e.__BV_toggle_TARGETS__)||(e.__BV_toggle_TARGETS__=n,n.forEach(e=>{Object(v.a)(Object(d.a)(i,t)).$emit(k,e)}))},N={bind(e,t,i){e.__BV_toggle_STATE__=!1,e.__BV_toggle_TARGETS__=[],((e,t)=>{if(w(e,t),t){const i=(t,i)=>{Object(l.a)(e.__BV_toggle_TARGETS__||[],t)&&(e.__BV_toggle_STATE__=i,D(e,i))};e.__BV_toggle_HANDLER__=i,Object(v.a)(t).$on([h,b],i)}})(e,Object(d.a)(i,t)),O(e,t,i)},componentUpdated:O,updated:O,unbind(e,t,i){S(e),w(e,Object(d.a)(i,t)),x(e,"__BV_toggle_HANDLER__"),x(e,"__BV_toggle_CLICK__"),x(e,"__BV_toggle_STATE__"),x(e,"__BV_toggle_TARGETS__"),Object(c.y)(e,"collapsed"),Object(c.y)(e,"not-collapsed"),Object(c.x)(e,"aria-expanded"),Object(c.x)(e,"aria-controls"),Object(c.x)(e,"role"),Object(c.A)(e,"overflow-anchor")}}},A5dm:function(e,t,i){"use strict";var n=i("z1xw"),s=i("waGw"),a=i("iQdY"),o=i("Pyw5"),r=i.n(o);const l={name:"GlTruncate",POSITION:a.a,directives:{GlTooltip:n.a,GlResizeObserver:s.a},props:{text:{type:String,required:!0},position:{type:String,required:!1,default:a.a.END,validator:e=>Object.values(a.a).includes(e)},withTooltip:{type:Boolean,required:!1,default:!1}},data:()=>({isTruncated:!1}),computed:{middleIndex(){return Math.floor(this.text.length/2)},first(){return this.text.slice(0,this.middleIndex)},last(){return this.text.slice(this.middleIndex)},isTooltipDisabled(){return!this.withTooltip||!this.isTruncated}},watch:{withTooltip(e){e&&this.checkTruncationState()}},methods:{checkTruncationState(){this.withTooltip&&(this.isTruncated=this.$refs.text.scrollWidth>this.$refs.text.offsetWidth)}}};const d=r()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.position===e.$options.POSITION.START?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{disabled:e.isTooltipDisabled},expression:"{ disabled: isTooltipDisabled }"},{name:"gl-resize-observer",rawName:"v-gl-resize-observer:[withTooltip]",value:e.checkTruncationState,expression:"checkTruncationState",arg:e.withTooltip}],staticClass:"gl-truncate-component",attrs:{title:e.text}},[i("span",{ref:"text",staticClass:"gl-truncate-start gl-text-overflow-ellipsis!"},[e._v("‎"+e._s(e.text)+"‎")])]):e.position===e.$options.POSITION.MIDDLE?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{disabled:e.isTooltipDisabled},expression:"{ disabled: isTooltipDisabled }"},{name:"gl-resize-observer",rawName:"v-gl-resize-observer:[withTooltip]",value:e.checkTruncationState,expression:"checkTruncationState",arg:e.withTooltip}],staticClass:"gl-truncate-component",attrs:{title:e.text}},[i("span",{ref:"text",staticClass:"gl-truncate-end"},[e._v(e._s(e.first))]),i("span",{staticClass:"gl-truncate-start"},[e._v("‎"+e._s(e.last)+"‎")])]):i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{disabled:e.isTooltipDisabled},expression:"{ disabled: isTooltipDisabled }"},{name:"gl-resize-observer",rawName:"v-gl-resize-observer:[withTooltip]",value:e.checkTruncationState,expression:"checkTruncationState",arg:e.withTooltip}],staticClass:"gl-truncate-component",attrs:{"data-testid":"truncate-end-container",title:e.text}},[i("span",{ref:"text",staticClass:"gl-truncate-end"},[e._v(e._s(e.text))])])},staticRenderFns:[]},void 0,l,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=d},AuBS:function(e,t,i){"use strict";var n=i("Lzak"),s=i("z1xw"),a=i("/lV4"),o=i("AxUD"),r=i("HZAj");const l={[r.c]:Object(a.a)("activity"),[r.d]:Object(a.a)("comment"),[r.e]:Object(a.a)("design"),[o.m]:Object(a.a)("epic"),[o.o]:Object(a.a)("issue"),[o.p]:Object(a.a)("merge request"),[r.f]:Object(a.a)("snippet")};var d={components:{GlBadge:n.a},directives:{GlTooltip:s.a},props:{importableType:{type:String,required:!1,default:""},textOnly:{type:Boolean,required:!1,default:!1}},computed:{title(){return Object(a.h)(Object(a.g)("BulkImport|This %{importable} was imported from another instance."),{importable:l[this.importableType]})}}},c=i("tBpV"),u=Object(c.a)(d,(function(){var e=this,t=e._self._c;return e.textOnly?t("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:e.title,expression:"title"}]},[e._v("\n  "+e._s(e.__("Imported"))+"\n")]):t("gl-badge",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:e.title,expression:"title"}],staticClass:"gl-shrink-0"},[e._v("\n  "+e._s(e.__("Imported"))+"\n")])}),[],!1,null,null,null);t.a=u.exports},"Fsq/":function(e,t,i){"use strict";var n=i("z1xw"),s=i("A5dm"),a=i("bOix"),o=i("5QKO"),r={directives:{GlTooltip:n.a},components:{GlTruncate:s.a},mixins:[o.a],props:{time:{type:[String,Number,Date],required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""},dateTimeFormat:{type:String,required:!1,default:a.c,validator:function(e){return a.b.includes(e)}},enableTruncation:{type:Boolean,required:!1,default:!1}},computed:{timeAgo(){return this.timeFormatted(this.time,this.dateTimeFormat)},tooltipText(){return this.enableTruncation?void 0:this.tooltipTitle(this.time)}}},l=i("tBpV"),d=Object(l.a)(r,(function(){var e=this,t=e._self._c;return t("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:e.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:e.cssClass,attrs:{title:e.tooltipText,datetime:e.time}},[e._t("default",(function(){return[e.enableTruncation?[t("gl-truncate",{attrs:{text:e.timeAgo,"with-tooltip":""}})]:[e._v(e._s(e.timeAgo))]]}),{timeAgo:e.timeAgo})],2)}),[],!1,null,null,null);t.a=d.exports},GwXZ:function(e,t,i){"use strict";i("v2fZ");var n=i("dsWN"),s=i("jlnU"),a=i("5v28"),o=i("O6Bj"),r=i("d08M"),l=i("JtyA"),d=i("VcEk"),c=i.n(d),u=i("enyH");const m=["design-detail-layout","gl-overflow-hidden","gl-m-0"];var g=i("/lV4");const f=Object(g.a)("Could not find design."),v=Object(g.a)("Requested design version does not exist.");var p=i("h7kv"),h=i.n(p),b=(i("3UXl"),i("iyoE"),i("FkSe")),k=i("NmEs"),_=i("s1D3"),y=i("0ch9"),S=i("lnTC"),w={components:{GlIcon:_.a},props:{image:{type:String,required:!1,default:""},name:{type:String,required:!1,default:""},scale:{type:Number,required:!1,default:1}},data:()=>({baseImageSize:null,imageStyle:null,imageError:!1}),watch:{scale(e){this.zoom(e)}},beforeDestroy(){window.removeEventListener("resize",this.resizeThrottled,!1)},mounted(){var e=this;this.image||this.onImgLoad(),this.resizeThrottled=h()((function(){e.setBaseImageSize()}),400),window.addEventListener("resize",this.resizeThrottled,!1)},methods:{onImgLoad(){requestIdleCallback(this.setBaseImageSize,{timeout:1e3}),requestIdleCallback(this.setImageNaturalScale,{timeout:1e3}),Object(S.a)({measures:[{name:y.a,start:y.b}]})},onImgError(){this.imageError=!0},setBaseImageSize(){const{contentImg:e}=this.$refs;e&&(0===e.offsetHeight||0===e.offsetWidth?this.baseImageSize={height:e.naturalHeight,width:e.naturalWidth}:this.baseImageSize={height:e.offsetHeight,width:e.offsetWidth},this.onResize({width:this.baseImageSize.width,height:this.baseImageSize.height}))},setImageNaturalScale(){const{contentImg:e}=this.$refs;if(!e)return;const{naturalHeight:t,naturalWidth:i}=e;if(0===t||0===i)return;const{height:n,width:s}=this.baseImageSize;this.imageStyle={width:s+"px",height:n+"px"},this.$parent.$emit("setMaxScale",Math.round((n+s)/(t+i)*100)/100)},onResize({width:e,height:t}){this.$emit("resize",{width:e,height:t})},zoom(e){var t=this;if(1===e)return this.imageStyle=null,void this.$nextTick((function(){t.setBaseImageSize()}));const i=this.baseImageSize.width*e,n=this.baseImageSize.height*e;this.imageStyle={width:i+"px",height:n+"px"},this.onResize({width:i,height:n})}}},D=i("tBpV"),x=Object(D.a)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"gl-mx-auto gl-my-auto js-design-image"},[e.imageError?t("gl-icon",{staticClass:"gl-text-gray-200",attrs:{name:"media-broken",size:48}}):e._e(),e._v(" "),t("img",{directives:[{name:"show",rawName:"v-show",value:!e.imageError,expression:"!imageError"}],ref:"contentImg",staticClass:"gl-max-h-full gl-border",class:{"img-fluid":!e.imageStyle},style:e.imageStyle,attrs:{src:e.image,alt:e.name},on:{error:e.onImgError,load:e.onImgLoad}})],1)}),[],!1,null,null,null).exports;var O={components:{DesignImage:x,GlLoadingIcon:b.a},props:{image:{type:String,required:!1,default:""},imageName:{type:String,required:!1,default:""},discussions:{type:Array,required:!0},isAnnotating:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:1},resolvedDiscussionsExpanded:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},disableCommenting:{type:Boolean,required:!0}},data:()=>({overlayDimensions:null,overlayPosition:null,currentAnnotationPosition:null,zoomFocalPoint:{x:0,y:0,width:0,height:0},initialLoad:!0,lastDragPosition:null,isDraggingDesign:!1,isLoggedIn:Object(k.C)()}),computed:{discussionStartingNotes(){return this.discussions.map((function(e){return{...e.notes[0],index:e.index}}))},currentCommentForm(){return this.isAnnotating&&this.currentAnnotationPosition||null},presentationStyle(){return{cursor:this.isDraggingDesign?"grabbing":void 0}}},beforeDestroy(){const{presentationViewport:e}=this.$refs;e&&e.removeEventListener("scroll",this.scrollThrottled,!1)},mounted(){var e=this;const{presentationViewport:t}=this.$refs;t&&(this.scrollThrottled=h()((function(){e.shiftZoomFocalPoint()}),400),t.addEventListener("scroll",this.scrollThrottled,!1))},methods:{syncCurrentAnnotationPosition(){if(!this.currentAnnotationPosition)return;const e=this.overlayDimensions.width/this.currentAnnotationPosition.width,t=this.overlayDimensions.height/this.currentAnnotationPosition.height,i=this.currentAnnotationPosition.x*e,n=this.currentAnnotationPosition.y*t;this.currentAnnotationPosition=this.getAnnotationPosition({x:i,y:n})},setOverlayDimensions(e){this.overlayDimensions=e,this.syncCurrentAnnotationPosition()},setOverlayPosition(){this.overlayDimensions||(this.overlayPosition={});const{presentationViewport:e}=this.$refs;e&&(this.overlayPosition={left:`calc(50% - ${this.overlayDimensions.width/2}px)`,top:`calc(50% - ${this.overlayDimensions.height/2}px)`},this.overlayDimensions.width>e.offsetWidth&&(this.overlayPosition.left="0"),this.overlayDimensions.height>e.offsetHeight&&(this.overlayPosition.top="0"))},getViewportCenter(){const{presentationViewport:e}=this.$refs;if(!e)return{};const t=e.scrollWidth-e.offsetWidth,i=e.scrollHeight-e.offsetHeight,n=e.scrollLeft>0?e.scrollLeft/t:0,s=e.scrollTop>0?e.scrollTop/i:0,a=(e.scrollWidth-e.offsetWidth-0)*n,o=(e.scrollHeight-e.offsetHeight-0)*s;return{x:e.offsetWidth/2+a,y:e.offsetHeight/2+o}},scrollToFocalPoint(){const{presentationViewport:e}=this.$refs;if(!e)return;const t=this.zoomFocalPoint.x-e.offsetWidth/2,i=this.zoomFocalPoint.y-e.offsetHeight/2;e.scrollTo(t,i)},scaleZoomFocalPoint(){const{x:e,y:t,width:i,height:n}=this.zoomFocalPoint,s=this.overlayDimensions.width/i,a=this.overlayDimensions.height/n;this.zoomFocalPoint={x:Math.round(e*s*100)/100,y:Math.round(t*a*100)/100,...this.overlayDimensions}},shiftZoomFocalPoint(){this.zoomFocalPoint={...this.getViewportCenter(),...this.overlayDimensions}},onImageResize(e){var t=this;this.setOverlayDimensions(e),this.setOverlayPosition(),this.$nextTick((function(){t.initialLoad?(t.shiftZoomFocalPoint(),t.initialLoad=!1):(t.scaleZoomFocalPoint(),t.scrollToFocalPoint())}))},getAnnotationPosition(e){const{x:t,y:i}=e,{width:n,height:s}=this.overlayDimensions;return{x:Math.round(t),y:Math.round(i),width:Math.round(n),height:Math.round(s)}},openCommentForm(e){this.currentAnnotationPosition=this.getAnnotationPosition(e),this.$emit("openCommentForm",this.currentAnnotationPosition)},closeCommentForm(){this.currentAnnotationPosition=null,this.$emit("closeCommentForm")},moveNote({noteId:e,discussionId:t,coordinates:i}){const n=this.getAnnotationPosition(i);this.$emit("moveNote",{noteId:e,discussionId:t,position:n})},onPresentationMousedown({clientX:e,clientY:t}){this.isDesignOverflowing()&&(this.lastDragPosition={x:e,y:t})},getDragDelta(e,t){return{deltaX:this.lastDragPosition.x-e,deltaY:this.lastDragPosition.y-t}},exceedsDragThreshold(e,t){const{deltaX:i,deltaY:n}=this.getDragDelta(e,t);return Math.abs(i)>2||Math.abs(n)>2},shouldDragDesign(e,t){return this.lastDragPosition&&(this.isDraggingDesign||this.exceedsDragThreshold(e,t))},onPresentationMousemove({clientX:e,clientY:t}){const{presentationViewport:i}=this.$refs;if(!i||!this.shouldDragDesign(e,t))return;this.isDraggingDesign=!0;const{scrollLeft:n,scrollTop:s}=i,{deltaX:a,deltaY:o}=this.getDragDelta(e,t);i.scrollTo(n+a,s+o),this.lastDragPosition={x:e,y:t}},onPresentationMouseup(){this.lastDragPosition=null,this.isDraggingDesign=!1},isDesignOverflowing(){const{presentationViewport:e}=this.$refs;return!!e&&(e.scrollWidth>e.offsetWidth||e.scrollHeight>e.offsetHeight)}}},N=Object(D.a)(O,(function(){var e=this,t=e._self._c;return t("div",{ref:"presentationViewport",staticClass:"gl-h-full gl-w-full gl-p-5 overflow-auto gl-relative",style:e.presentationStyle,on:{mousedown:e.onPresentationMousedown,mousemove:e.onPresentationMousemove,mouseup:e.onPresentationMouseup,mouseleave:e.onPresentationMouseup,touchstart:e.onPresentationMousedown,touchmove:e.onPresentationMousemove,touchend:e.onPresentationMouseup,touchcancel:e.onPresentationMouseup}},[e.isLoading?t("gl-loading-icon",{staticClass:"gl-flex gl-h-full gl-items-center",attrs:{size:"xl"}}):t("div",{staticClass:"gl-h-full gl-w-full gl-flex gl-items-center gl-relative"},[e.image?t("design-image",{attrs:{image:e.image,name:e.imageName,scale:e.scale},on:{resize:e.onImageResize}}):e._e()],1)],1)}),[],!1,null,null,null).exports,j=i("4lAS"),T=i("4+8U"),C=i("z1xw"),E=i("HZAj"),I=i("AuBS"),F={components:{GlIcon:_.a},WORK_ITEM_ROUTE_NAME:l.Vb},P=Object(D.a)(F,(function(){var e=this._self._c;return e("div",{staticClass:"gl-border-l"},[e("router-link",{staticClass:"btn btn-icon gl-px-3 gl-mx-3 gl-border-0",attrs:{to:{name:this.$options.WORK_ITEM_ROUTE_NAME,query:this.$route.query},"aria-label":this.s__("DesignManagement|Go back to designs")}},[e("gl-icon",{attrs:{name:"close"}})],1)],1)}),[],!1,null,null,null).exports,q=i("1fc5"),A={i18n:{nextButton:Object(g.g)("DesignManagement|Go to next design"),previousButton:Object(g.g)("DesignManagement|Go to previous design")},components:{GlButton:j.a,GlButtonGroup:q.a},directives:{GlTooltip:C.a},props:{filename:{type:String,required:!0},allDesigns:{type:Array,required:!1,default:function(){return[]}}},computed:{designsCount(){return this.allDesigns.length},currentIndex(){var e=this;return this.allDesigns.findIndex((function(t){return t.filename===e.filename}))},paginationText(){return Object(g.h)(Object(g.g)("DesignManagement|of %{designs_count}"),{designs_count:this.designsCount})},previousDesign(){return 0===this.currentIndex?null:this.allDesigns[this.currentIndex-1]},nextDesign(){return this.currentIndex+1===this.designsCount?null:this.allDesigns[this.currentIndex+1]}},mounted(){var e=this;o.b.bind(Object(r.yb)(r.N),(function(){return e.navigateToDesign(e.previousDesign)})),o.b.bind(Object(r.yb)(r.M),(function(){return e.navigateToDesign(e.nextDesign)}))},beforeDestroy(){o.b.unbind(Object(r.yb)(r.N)),o.b.unbind(Object(r.yb)(r.M))},methods:{navigateToDesign(e){e&&this.$router.push({name:l.f,params:{id:e.filename},query:this.$route.query})}}},V=Object(D.a)(A,(function(){var e=this,t=e._self._c;return e.designsCount?t("div",{staticClass:"gl-display-flex gl-align-items-center gl-flex-shrink-0"},[t("div",{staticClass:"gl-w-5 gl-mr-2 gl-text-right"},[e._v(e._s(e.currentIndex+1))]),e._v(" "),t("div",[e._v(e._s(e.paginationText))]),e._v(" "),t("gl-button-group",{staticClass:"gl-ml-3"},[t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"js-previous-design",attrs:{disabled:!e.previousDesign,title:e.$options.i18n.previousButton,"aria-label":e.$options.i18n.previousButton,icon:"chevron-lg-left"},on:{click:function(t){return e.navigateToDesign(e.previousDesign)}}}),e._v(" "),t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"js-next-design",attrs:{disabled:!e.nextDesign,title:e.$options.i18n.nextButton,"aria-label":e.$options.i18n.nextButton,icon:"chevron-lg-right"},on:{click:function(t){return e.navigateToDesign(e.nextDesign)}}})],1)],1):e._e()}),[],!1,null,null,null).exports,R={i18n:{downloadButtonLabel:Object(g.g)("DesignManagement|Download design"),hideCommentsButtonLabel:Object(g.g)("DesignManagement|Hide comments"),showCommentsButtonLabel:Object(g.g)("DesignManagement|Show comments")},components:{GlButton:j.a,GlIcon:_.a,GlSkeletonLoader:T.a,ImportedBadge:I.a,CloseButton:P,DesignNavigation:V},directives:{GlTooltip:C.a},props:{workItemTitle:{type:String,required:!0},design:{type:Object,required:!0},designFilename:{type:String,required:!0},isLoading:{type:Boolean,required:!0},isSidebarOpen:{type:Boolean,required:!0},allDesigns:{type:Array,required:!1,default:function(){return[]}}},computed:{toggleCommentsButtonLabel(){return this.isSidebarOpen?this.$options.i18n.hideCommentsButtonLabel:this.$options.i18n.showCommentsButtonLabel}},TYPE_DESIGN:E.e},B=Object(D.a)(R,(function(){var e=this,t=e._self._c;return t("header",{staticClass:"gl-flex gl-flex-col md:gl-flex-row md:gl-items-center gl-justify-between gl-max-w-full gl-bg-white gl-py-4 gl-pl-5 gl-border-b js-design-header"},[t("div",{staticClass:"gl-flex gl-flex-row gl-items-center gl-mb-3 md:gl-mb-0 gl-overflow-hidden"},[t("div",{staticClass:"gl-overflow-hidden gl-flex gl-mr-3"},[e.isLoading?t("gl-skeleton-loader",{attrs:{lines:1}}):t("h2",{staticClass:"gl-flex gl-items-center gl-overflow-hidden gl-m-0 gl-text-base"},[t("span",{staticClass:"gl-text-truncate gl-text-gray-900 gl-no-underline"},[e._v("\n          "+e._s(e.workItemTitle)+"\n        ")]),e._v(" "),t("gl-icon",{staticClass:"gl-text-gray-200 gl-flex-shrink-0",attrs:{name:"chevron-right"}}),e._v(" "),t("span",{staticClass:"gl-text-truncate gl-font-normal"},[e._v(e._s(e.design.filename))]),e._v(" "),e.design.imported?t("imported-badge",{staticClass:"gl-ml-2",attrs:{"importable-type":e.$options.TYPE_DESIGN}}):e._e()],1)],1),e._v(" "),t("close-button",{staticClass:"md:gl-hidden gl-ml-auto"})],1),e._v(" "),t("div",{staticClass:"gl-flex md:gl-flex-row gl-flex-shrink-0 gl-md-ml-auto gl-mr-5"},[t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"gl-ml-2",attrs:{category:"tertiary",href:e.design.image,icon:"download",title:e.$options.i18n.downloadButtonLabel,"aria-label":e.$options.i18n.downloadButtonLabel}}),e._v(" "),t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"gl-ml-2 gl-mr-5",attrs:{category:"tertiary",icon:"comments",title:e.toggleCommentsButtonLabel,"aria-label":e.toggleCommentsButtonLabel,"data-testid":"toggle-design-sidebar"},on:{click:function(t){return e.$emit("toggle-sidebar")}}}),e._v(" "),t("design-navigation",{staticClass:"gl-ml-auto",attrs:{filename:e.designFilename,"all-designs":e.allDesigns}})],1),e._v(" "),t("close-button",{staticClass:"gl-hidden md:gl-flex"})],1)}),[],!1,null,null,null).exports,L=(i("UezY"),i("z6RN"),i("hG7+"),i("UKdF")),z=i("nbHk"),G=i("dsLq"),M=i("EvrX"),$=i("vkYZ"),H=i("MV2A"),W=i("Fsq/"),U=i("Vjau"),Q=i("Q33P"),K=i.n(Q),Z=i("tbP8"),Y=i("mFhR"),X=i("Mp8J"),J=i("FxFN"),ee=i("OgyL"),te={i18n:{editCommentLabel:Object(g.a)("Edit comment"),moreActionsLabel:Object(g.a)("More actions"),deleteCommentText:Object(g.a)("Delete comment"),copyCommentLink:Object(g.a)("Copy link")},components:{GlAvatar:Z.a,GlAvatarLink:Y.a,GlLink:H.a,ImportedBadge:I.a,TimeAgoTooltip:W.a,TimelineEntryItem:ee.a},directives:{GlTooltip:C.a,SafeHtml:X.a},props:{note:{type:Object,required:!0}},data:()=>({isEditing:!1}),computed:{author(){return this.note.author||{}},hasAuthor(){return!K()(this.author)},authorId(){return Object(J.e)(this.author.id)},noteAnchorId(){return Object(u.c)(this.note.id)},isImported(){return this.note.imported}},TYPE_COMMENT:E.d},ie=Object(D.a)(te,(function(){var e=this,t=e._self._c;return t("timeline-entry-item",{staticClass:"design-note note-form",attrs:{id:"note_"+e.noteAnchorId}},[t("gl-avatar-link",{staticClass:"gl-float-left gl-mr-3 link-inherit-color js-user-link",attrs:{href:e.author.webUrl,"data-user-id":e.authorId,"data-username":e.author.username}},[t("gl-avatar",{attrs:{size:32,src:e.author.avatarUrl,"entity-name":e.author.username,alt:e.author.username}})],1),e._v(" "),t("div",{staticClass:"gl-flex gl-justify-between"},[t("div",[e.hasAuthor?e._m(0):t("span",[e._v(e._s(e.__("A deleted user")))]),e._v(" "),t("span",{staticClass:"note-headline-light note-headline-meta"},[t("span",{staticClass:"system-note-message"},[e._t("default")],2),e._v(" "),t("gl-link",{staticClass:"note-timestamp system-note-separator gl-inline-block gl-mb-2 gl-text-sm link-inherit-color",attrs:{href:"#note_"+e.noteAnchorId}},[t("time-ago-tooltip",{attrs:{time:e.note.createdAt,"tooltip-placement":"bottom"}})],1),e._v(" "),e.isImported?t("imported-badge",{attrs:{"importable-type":e.$options.TYPE_COMMENT,size:"sm"}}):e._e()],1)],1),e._v(" "),t("div",{staticClass:"gl-flex gl-items-start -gl-mt-2 -gl-mr-2"},[e._t("resolve-discussion")],2)]),e._v(" "),e.isEditing?e._e():[t("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.note.bodyHtml,expression:"note.bodyHtml"}],staticClass:"note-text md",attrs:{"data-testid":"note-text"}}),e._v(" "),e._t("resolved-status")]],2)}),[function(){var e=this,t=e._self._c;return t("gl-link",{staticClass:"js-user-link link-inherit-color",attrs:{href:e.author.webUrl,"data-testid":"user-link","data-user-id":e.authorId,"data-username":e.author.username}},[t("span",{staticClass:"note-header-author-name gl-font-bold"},[e._v(e._s(e.author.name))]),e._v(" "),e.author.status_tooltip_html?t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.author.status_tooltip_html,expression:"author.status_tooltip_html"}]}):e._e(),e._v(" "),t("span",{staticClass:"note-headline-light"},[e._v("@"+e._s(e.author.username))])])}],!1,null,null,null).exports,ne=(i("dHQd"),i("yoDG"),i("KeS/"),i("tWNI"),i("8d6S"),i("VwWG"),i("IYHS"),i("rIA9"),i("MViX"),i("zglm"),i("GDOA"),i("hlbI"),i("a0mT"),i("u3H1"),i("ta8/"),i("IKCR"),i("nmTw"),i("W2kU"),i("58fc"),i("7dtT"),i("Rhav"),i("uhEP"),i("eppl"),i("IO2v")),se={name:"ToggleNotesWidget",components:{GlButton:j.a,GlAvatar:Z.a,GlAvatarLink:Y.a,GlAvatarsInline:ne.a},directives:{GlTooltip:C.a},props:{collapsed:{type:Boolean,required:!0},replies:{type:Array,required:!0}},computed:{iconName(){return this.collapsed?"chevron-right":"chevron-down"},toggleText(){return this.collapsed?Object(g.f)("%d reply","%d replies",this.replies.length):Object(g.a)("Collapse replies")},toggleTextColor(){return this.collapsed?"gl-text-blue-500":"gl-text-gray-900"},authors(){return[...new Set(this.replies.map((function(e){return e.author})))]},authorCollapsedTooltip(){return this.authors.length>2?Object(g.f)("%d reply","%d replies",this.authors.length):""}}},ae=Object(D.a)(se,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"toggle-comments gl-bg-gray-10 gl-flex gl-items-center gl-p-3 gl-min-h-8 gl-rounded-bl-base gl-rounded-br-base",class:{expanded:!e.collapsed},attrs:{"data-testid":"toggle-comments-wrapper"}},[t("gl-button",{staticClass:"gl-my-2 gl-mr-3 !gl-p-0",attrs:{category:"tertiary","data-testid":"toggle-replies-button",icon:e.iconName,"aria-label":e.toggleText},on:{click:function(t){return e.$emit("toggle")}}}),e._v(" "),e.collapsed?[e.authors.length?t("gl-avatars-inline",{staticClass:"gl-whitespace-nowrap gl-mr-3",attrs:{avatars:e.authors,collapsed:"","max-visible":2,"avatar-size":24,"badge-tooltip-prop":"name","badge-sr-only-text":e.authorCollapsedTooltip},scopedSlots:e._u([{key:"avatar",fn:function({avatar:e}){return[t("gl-avatar-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{href:e.webUrl,title:e.name}},[t("gl-avatar",{attrs:{alt:e.name,src:e.avatarUrl,size:24}})],1)]}}],null,!1,3624126802)}):e._e()]:e._e(),e._v(" "),t("gl-button",{staticClass:"toggle-comments-button",attrs:{variant:"link","data-testid":"replies-button"},on:{click:function(t){return e.$emit("toggle")}}},[t("span",{class:e.toggleTextColor},[e._v(e._s(e.toggleText))])])],2)}),[],!1,null,null,null).exports,oe={components:{DesignNote:ie,DesignNotePin:U.a,GlButton:j.a,GlLink:H.a,TimeAgoTooltip:W.a,ToggleRepliesWidget:ae},directives:{GlTooltip:C.a},props:{discussion:{type:Object,required:!0}},data(){return{areRepliesCollapsed:this.discussion.resolved,isLoggedIn:Object(k.C)()}},computed:{resolveCheckboxText(){return this.discussion.resolved?Object(g.g)("DesignManagement|Unresolve thread"):Object(g.g)("DesignManagement|Resolve thread")},firstNote(){return this.discussion.notes[0]},discussionReplies(){return this.discussion.notes.slice(1)},areRepliesShown(){return!this.areRepliesCollapsed},resolveIconName(){return this.discussion.resolved?"check-circle-filled":"check-circle"},isRepliesWidgetVisible(){return this.discussionReplies.length>0}}},re=Object(D.a)(oe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"design-discussion-wrapper",on:{click:function(t){return e.$emit("update-active-discussion")}}},[t("design-note-pin",{attrs:{"is-resolved":e.discussion.resolved,label:e.discussion.index}}),e._v(" "),t("ul",{staticClass:"design-discussion bordered-box gl-relative gl-p-0 gl-list-none"},[t("design-note",{attrs:{note:e.firstNote},scopedSlots:e._u([e.isLoggedIn&&e.discussion.resolvable?{key:"resolve-discussion",fn:function(){return[t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{"aria-label":e.resolveCheckboxText,icon:e.resolveIconName,title:e.resolveCheckboxText,disabled:!0,category:"tertiary","data-testid":"resolve-button"}})]},proxy:!0}:null,e.discussion.resolved?{key:"resolved-status",fn:function(){return[t("p",{staticClass:"gl-text-gray-500 gl-text-sm gl-m-0 gl-mt-5",attrs:{"data-testid":"resolved-message"}},[e._v("\n          "+e._s(e.__("Resolved by"))+"\n          "),t("gl-link",{staticClass:"gl-text-gray-500 gl-no-underline gl-text-sm link-inherit-color",attrs:{href:e.discussion.resolvedBy.webUrl,target:"_blank"}},[e._v(e._s(e.discussion.resolvedBy.name))]),e._v(" "),t("time-ago-tooltip",{attrs:{time:e.discussion.resolvedAt,"tooltip-placement":"bottom"}})],1)]},proxy:!0}:null],null,!0)}),e._v(" "),e.isRepliesWidgetVisible?t("toggle-replies-widget",{attrs:{collapsed:e.areRepliesCollapsed,replies:e.discussionReplies},on:{toggle:function(t){e.areRepliesCollapsed=!e.areRepliesCollapsed}}}):e._e(),e._v(" "),e._l(e.discussionReplies,(function(i){return t("design-note",{directives:[{name:"show",rawName:"v-show",value:e.areRepliesShown,expression:"areRepliesShown"}],key:i.id,attrs:{note:i}})}))],2)],1)}),[],!1,null,null,null).exports,le={i18n:{descriptionLabel:Object(g.g)("DesignManagement|Description")},directives:{SafeHtml:X.a},props:{design:{type:Object,required:!0}}},de={components:{DesignDescription:Object(D.a)(le,(function(){var e=this._self._c;return e("div",{staticClass:"design-description-container"},[e("div",{staticClass:"design-description-view"},[e("div",{staticClass:"design-description-header gl-flex gl-justify-between gl-mb-2"},[e("h3",{staticClass:"!gl-leading-20 gl-font-lg gl-m-0"},[this._v("\n        "+this._s(this.$options.i18n.descriptionLabel)+"\n      ")])]),this._v(" "),this.design.descriptionHtml?e("div",{staticClass:"design-description js-task-list-container"},[e("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:this.design.descriptionHtml,expression:"design.descriptionHtml"}],ref:"gfm-content",staticClass:"md gl-mb-4",attrs:{"data-testid":"design-description-content"}})]):this._e()])])}),[],!1,null,null,null).exports,DesignDisclosure:$.a,DesignDiscussion:re,GlAccordion:L.a,GlAccordionItem:z.a,GlSkeletonLoader:T.a,GlEmptyState:G.a},props:{design:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},isOpen:{type:Boolean,required:!0}},data:()=>({isLoggedIn:Object(k.C)(),resolvedDiscussionsExpanded:!1}),computed:{showDescription(){return!this.isLoading&&Boolean(this.design.descriptionHtml)},discussions(){var e;return null!==(e=this.design)&&void 0!==e&&e.discussions?Object(u.b)(this.design.discussions):[]},unresolvedDiscussions(){return this.discussions.filter((function(e){return!e.resolved}))},unresolvedDiscussionsCount(){return Object(g.f)("%d Thread","%d Threads",this.unresolvedDiscussions.length)},resolvedDiscussions(){return this.discussions.filter((function(e){return e.resolved}))},hasResolvedDiscussions(){return this.resolvedDiscussions.length>0},resolvedDiscussionsTitle(){return`${this.$options.i18n.resolveCommentsToggleText} (${this.resolvedDiscussions.length})`}},i18n:{resolveCommentsToggleText:Object(g.g)("DesignManagement|Resolved Comments")},EMPTY_DISCUSSION_URL:M.a},ce=Object(D.a)(de,(function(){var e=this,t=e._self._c;return t("design-disclosure",{attrs:{open:e.isOpen},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"image-notes gl-h-full gl-pt-0"},[e.showDescription?t("design-description",{staticClass:"gl-my-5 gl-border-b",attrs:{design:e.design}}):e._e(),e._v(" "),e.isLoading?t("div",{staticClass:"gl-my-5"},[t("gl-skeleton-loader")],1):[t("h3",{staticClass:"!gl-leading-20 gl-text-lg gl-my-5",attrs:{"data-testid":"unresolved-discussion-count"}},[e._v("\n          "+e._s(e.unresolvedDiscussionsCount)+"\n        ")]),e._v(" "),e.isLoggedIn&&0===e.unresolvedDiscussions.length?t("gl-empty-state",{attrs:{"data-testid":"new-discussion-disclaimer","svg-path":e.$options.EMPTY_DISCUSSION_URL}}):e._e(),e._v(" "),e._l(e.unresolvedDiscussions,(function(i){return t("design-discussion",{key:i.id,attrs:{discussion:i,"design-id":e.$route.params.id,"noteable-id":e.design.id,"data-testid":"unresolved-discussion"}})})),e._v(" "),e.hasResolvedDiscussions?t("gl-accordion",{staticClass:"gl-mb-5",attrs:{"header-level":3}},[t("gl-accordion-item",{attrs:{title:e.resolvedDiscussionsTitle,"header-class":"!gl-mb-5"},model:{value:e.resolvedDiscussionsExpanded,callback:function(t){e.resolvedDiscussionsExpanded=t},expression:"resolvedDiscussionsExpanded"}},e._l(e.resolvedDiscussions,(function(i){return t("design-discussion",{key:i.id,attrs:{discussion:i,"design-id":e.$route.params.id,"noteable-id":e.design.id,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"data-testid":"resolved-discussion"}})})),1)],1):e._e(),e._v(" "),e._t("reply-form")]],2)]},proxy:!0}])})}),[],!1,null,null,null).exports;var ue={WORK_ITEM_ROUTE_NAME:l.Vb,components:{DesignPresentation:N,DesignSidebar:ce,DesignToolbar:B,GlAlert:n.a},inject:["fullPath"],beforeRouteUpdate(e,t,i){this.scale=1,i()},beforeRouteEnter(e,t,i){const n=Object(u.e)();n&&n.classList.add(...m),i()},beforeRouteLeave(e,t,i){const n=Object(u.e)();n&&n.classList.remove(...m),i()},props:{iid:{type:String,required:!0},allDesigns:{type:Array,required:!1,default:function(){return[]}}},data:()=>({design:{},annotationCoordinates:null,errorMessage:"",scale:1,resolvedDiscussionsExpanded:!1,prevCurrentUserTodos:null,maxScale:2,discussions:[],workItemId:"",workItemTitle:"",isSidebarOpen:!0}),apollo:{design:{query:c.a,fetchPolicy:a.c.CACHE_AND_NETWORK,notifyOnNetworkStatusChange:!0,variables(){return this.designVariables},update:function(e){return Object(u.a)(e)},result(e){this.onDesignQueryResult(e)},error(){this.onQueryError(f)}}},computed:{isLoading(){return this.$apollo.queries.design.loading&&!this.design.id},designVariables(){return{fullPath:this.fullPath,iid:this.iid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},hasValidVersion(){return this.$route.query.version},designsVersion(){return this.hasValidVersion?"gid://gitlab/DesignManagement::Version/"+this.$route.query.version:null}},mounted(){o.b.bind(Object(r.yb)(r.J),this.closeDesign)},methods:{onDesignQueryResult({data:e,loading:t}){if(!t)if(e&&Object(u.a)(e))if(this.$route.query.version&&!this.hasValidVersion)this.onQueryError(v);else{const t=e.project.workItems.nodes[0];this.workItemId=t.id,this.workItemTitle=t.title}else this.onQueryError(f)},onQueryError(e){Object(s.createAlert)({message:e}),this.$router.push({name:this.$options.WORK_ITEM_ROUTE_NAME})},onError(e,t){if(this.errorMessage=e,t)throw t},closeDesign(){this.$router.push({name:this.$options.WORK_ITEM_ROUTE_NAME,query:this.$route.query})},setMaxScale(e){this.maxScale=1/e},toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}}},me=Object(D.a)(ue,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"design-detail js-design-detail fixed-top gl-w-full gl-flex gl-justify-content-center gl-flex-col gl-lg-flex-direction-row gl-bg-gray-10"},[t("div",{staticClass:"gl-flex gl-overflow-hidden gl-grow gl-flex-col gl-relative"},[t("design-toolbar",{attrs:{"work-item-title":e.workItemTitle,design:e.design,"design-filename":e.$route.params.id,"is-loading":e.isLoading,"is-sidebar-open":e.isSidebarOpen,"all-designs":e.allDesigns},on:{"toggle-sidebar":e.toggleSidebar}}),e._v(" "),t("div",{staticClass:"gl-flex gl-overflow-hidden gl-flex-col gl-lg-flex-direction-row gl-grow gl-relative"},[t("div",{staticClass:"gl-flex gl-overflow-hidden gl-flex-grow-2 gl-flex-col gl-relative"},[e.errorMessage?t("div",{staticClass:"gl-p-5"},[t("gl-alert",{attrs:{variant:"danger"},on:{dismiss:function(t){e.errorMessage=null}}},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")])],1):e._e(),e._v(" "),t("design-presentation",{attrs:{image:e.design.image,"image-name":e.design.filename,discussions:e.discussions,scale:e.scale,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"is-loading":e.isLoading,"disable-commenting":""},on:{setMaxScale:e.setMaxScale}})],1),e._v(" "),t("design-sidebar",{attrs:{design:e.design,"is-loading":e.isLoading,"is-open":e.isSidebarOpen}})],1)],1)])}),[],!1,null,null,null);t.a=me.exports},HZAj:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return r})),i.d(t,"f",(function(){return l})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return c}));var n=i("NmEs"),s=i("/lV4");const a="activity",o="comment",r="design",l="snippet",d={badges:Object(s.a)("Badge"),boards:Object(s.g)("Boards|Board"),epics:Object(s.a)("Epic"),issues:Object(s.a)("Issue"),labels:Object(s.a)("Label"),iterations:Object(s.a)("Iteration"),iterations_cadences:Object(s.g)("Iterations|Iteration cadence"),members:Object(s.a)("Member"),merge_requests:Object(s.a)("Merge request"),milestones:Object(s.a)("Milestone"),namespace_settings:Object(s.g)("GroupSettings|Namespace setting"),project:Object(s.a)("Project"),self:Object(s.a)("Group"),auto_devops:Object(s.a)("Auto DevOps"),ci_pipelines:Object(s.a)("CI pipeline"),container_expiration_policy:Object(s.a)("Container expiration policy"),design:Object(s.a)("Design"),project_feature:Object(s.a)("Project feature"),protected_branches:Object(s.a)("Protected Branch"),push_rule:Object(s.a)("Push Rule"),repository:Object(s.a)("Repository"),service_desk_setting:Object(s.a)("Service Desk")},c={diff_note:Object(s.a)("Diff notes"),issue:Object(s.a)("Issues"),issue_attachment:Object(s.g)("GithubImporter|Issue attachments"),issue_event:Object(s.a)("Issue events"),label:Object(s.a)("Labels"),lfs_object:Object(s.a)("LFS objects"),merge_request_attachment:Object(s.g)("GithubImporter|PR attachments"),milestone:Object(s.a)("Milestones"),note:Object(s.a)("Notes"),note_attachment:Object(s.g)("GithubImporter|Note attachments"),protected_branch:Object(s.a)("Protected branches"),collaborator:Object(s.g)("GithubImporter|Collaborators"),pull_request:Object(s.g)("GithubImporter|Pull requests"),pull_request_merged_by:Object(s.g)("GithubImporter|PR mergers"),pull_request_review:Object(s.g)("GithubImporter|PR reviews"),pull_request_review_request:Object(s.g)("GithubImporter|PR reviewers"),release:Object(s.a)("Releases"),release_attachment:Object(s.g)("GithubImporter|Release attachments")};Object.assign(c,Object(n.h)(c))},IO2v:function(e,t,i){"use strict";var n=i("SQMQ"),s=i.n(n),a=i("B42D"),o=i.n(a),r=i("XBTk"),l=i("tbP8"),d=i("DZUU"),c=i("Pyw5"),u=i.n(c);const m={name:"AvatarsInline",components:{GlAvatar:l.a,GlTooltip:d.a},props:{avatars:{type:Array,required:!0},maxVisible:{type:Number,required:!0},avatarSize:{type:Number,required:!0,validator:e=>r.i.includes(e)},collapsed:{type:Boolean,required:!1,default:!1},badgeSrOnlyText:{type:String,required:!0},badgeTooltipProp:{type:String,required:!1,default:""},badgeTooltipMaxChars:{type:Number,required:!1,default:null}},computed:{hiddenAvatars(){return this.avatars.slice(this.maxVisible)},collapsable(){return this.hiddenAvatars.length>0},visibleAvatars(){return this.collapsed?this.avatars.slice(0,this.maxVisible):this.avatars},badgeSize(){return{16:"sm",24:"md",32:"lg"}[this.avatarSize]||"lg"},badgeLabel(){return"+"+this.hiddenAvatars.length},badgeTooltipTitle(){if(!this.badgeTooltipProp)return"";const e=this.hiddenAvatars.map(e=>o()(e,this.badgeTooltipProp,"").trim()).join(", ");return this.badgeTooltipMaxChars?s()(e,{length:this.badgeTooltipMaxChars}):e}}};const g=u()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gl-avatars-inline",class:"gl-avatars-inline-"+e.badgeSize},[e._l(e.visibleAvatars,(function(t,n){return i("div",{key:n,staticClass:"gl-avatars-inline-child"},[e._t("avatar",(function(){return[i("gl-avatar",e._b({attrs:{size:e.avatarSize}},"gl-avatar",t,!1))]}),{avatar:t})],2)})),e._v(" "),e.collapsed&&e.collapsable?i("div",{staticClass:"gl-avatars-inline-child"},[e.badgeTooltipProp?i("gl-tooltip",{attrs:{target:function(){return e.$refs.badge}}},[e._v("\n      "+e._s(e.badgeTooltipTitle)+"\n    ")]):e._e(),e._v(" "),i("span",{ref:"badge",class:["gl-avatars-inline-badge",e.badgeSize],attrs:{"data-testid":"collapsed-avatars-badge","aria-hidden":"true"}},[e._v("\n      "+e._s(e.badgeLabel)+"\n    ")]),e._v(" "),i("span",{staticClass:"sr-only",attrs:{"data-testid":"badge-sr-only-text"}},[e._v(e._s(e.badgeSrOnlyText))])],1):e._e()],2)},staticRenderFns:[]},void 0,m,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=g},J6s1:function(e,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResolvedStatus"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Discussion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvedBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:130}};i.loc.source={body:"fragment ResolvedStatus on Discussion {\n  id\n  resolvable\n  resolved\n  resolvedAt\n  resolvedBy {\n    id\n    name\n    webUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.ResolvedStatus=function(e,t){var i={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=n[t]||new Set,o=new Set,r=new Set;for(a.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var n=s(e,t);n&&i.definitions.push(n)})),i}(i,"ResolvedStatus")},LjxR:function(e,t,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imported"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"awardEmoji"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"diffRefs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignDiffRefs"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNotePermissions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:583}};n.loc.source={body:'#import "./diff_refs.fragment.graphql"\n#import "~/graphql_shared/fragments/author.fragment.graphql"\n#import "./note_permissions.fragment.graphql"\n\nfragment DesignNote on Note {\n  id\n  author {\n    ...Author\n  }\n  body\n  bodyHtml\n  createdAt\n  resolved\n  imported\n  awardEmoji {\n    nodes {\n      name\n      user {\n        id\n        name\n      }\n    }\n  }\n  position {\n    diffRefs {\n      ...DesignDiffRefs\n    }\n    x\n    y\n    height\n    width\n  }\n  userPermissions {\n    ...DesignNotePermissions\n  }\n  discussion {\n    id\n    notes {\n      nodes {\n        id\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}n.definitions=n.definitions.concat(a(i("SqVG").definitions)),n.definitions=n.definitions.concat(a(i("5JsC").definitions)),n.definitions=n.definitions.concat(a(i("4ncF").definitions));var o={};function r(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.DesignNote=function(e,t){var i={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var n=o[t]||new Set,s=new Set,a=new Set;for(n.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(o[e]||new Set).forEach((function(e){a.add(e)})))}))}return s.forEach((function(t){var n=r(e,t);n&&i.definitions.push(n)})),i}(n,"DesignNote")},OgyL:function(e,t,i){"use strict";var n=i("tBpV"),s=Object(n.a)({},(function(){var e=this._self._c;return e("li",{staticClass:"timeline-entry"},[e("div",{staticClass:"timeline-entry-inner"},[this._t("default")],2)])}),[],!1,null,null,null);t.a=s.exports},QhCo:function(e,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignFile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageV432x230"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"descriptionHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:206}};i.loc.source={body:"fragment DesignFile on Design {\n  id\n  event\n  filename\n  notesCount\n  image\n  imageV432x230\n  description\n  descriptionHtml\n  fullPath\n  currentUserTodos(state: pending) {\n    nodes {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.DesignFile=function(e,t){var i={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=n[t]||new Set,o=new Set,r=new Set;for(a.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var n=s(e,t);n&&i.definitions.push(n)})),i}(i,"DesignFile")},SQMQ:function(e,t,i){var n=i("X/Qz"),s=i("voGz"),a=i("uLMv"),o=i("XCkn"),r=i("ltZm"),l=i("0Zrb"),d=i("/t47"),c=i("NDsS"),u=i("rhmX"),m=/\w*$/;e.exports=function(e,t){var i=30,g="...";if(o(t)){var f="separator"in t?t.separator:f;i="length"in t?c(t.length):i,g="omission"in t?n(t.omission):g}var v=(e=u(e)).length;if(a(e)){var p=d(e);v=p.length}if(i>=v)return e;var h=i-l(g);if(h<1)return g;var b=p?s(p,0,h).join(""):e.slice(0,h);if(void 0===f)return b+g;if(p&&(h+=b.length-h),r(f)){if(e.slice(h).search(f)){var k,_=b;for(f.global||(f=RegExp(f.source,u(m.exec(f))+"g")),f.lastIndex=0;k=f.exec(_);)var y=k.index;b=b.slice(0,void 0===y?h:y)}}else if(e.indexOf(n(f),h)!=h){var S=b.lastIndexOf(f);S>-1&&(b=b.slice(0,S))}return b+g}},SqVG:function(e,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignDiffRefs"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DiffRefs"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"baseSha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startSha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headSha"},arguments:[],directives:[]}]}}],loc:{start:0,end:71}};i.loc.source={body:"fragment DesignDiffRefs on DiffRefs {\n  baseSha\n  startSha\n  headSha\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.DesignDiffRefs=function(e,t){var i={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=n[t]||new Set,o=new Set,r=new Set;for(a.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var n=s(e,t);n&&i.definitions.push(n)})),i}(i,"DesignDiffRefs")},UKdF:function(e,t,i){"use strict";var n=i("o4PY"),s=i.n(n),a=i("Pyw5");const o={name:"GlAccordion",provide(){const e=s()("accordion-set-");return{defaultHeaderLevel:()=>this.headerLevel,accordionSetId:()=>this.autoCollapse&&e}},props:{autoCollapse:{type:Boolean,required:!1,default:!1},headerLevel:{type:Number,required:!0,validator:e=>e>0&&e<=6}}};const r=i.n(a)()({render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]},void 0,o,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=r},VcEk:function(e,t,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getDesignDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementVersionID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"widgets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WorkItemWidgetDesigns"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignFile"},directives:[]},{kind:"Field",name:{kind:"Name",value:"discussions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replyId"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ResolvedStatus"},directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1072}};n.loc.source={body:'#import "./fragments/design_file.fragment.graphql"\n#import "./fragments/discussion_resolved_status.fragment.graphql"\n#import "./fragments/design_note.fragment.graphql"\n\nquery getDesignDetails(\n  $fullPath: ID!\n  $iid: String!\n  $atVersion: DesignManagementVersionID\n  $filenames: [String!]\n) {\n  project(fullPath: $fullPath) {\n    id\n    workItems(iid: $iid) {\n      nodes {\n        id\n        title\n        widgets {\n          ... on WorkItemWidgetDesigns {\n            type\n            designCollection {\n              designs(atVersion: $atVersion, filenames: $filenames) {\n                nodes {\n                  ...DesignFile\n                  discussions {\n                    nodes {\n                      id\n                      replyId\n                      ...ResolvedStatus\n                      notes {\n                        nodes {\n                          ...DesignNote\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}n.definitions=n.definitions.concat(a(i("QhCo").definitions)),n.definitions=n.definitions.concat(a(i("J6s1").definitions)),n.definitions=n.definitions.concat(a(i("LjxR").definitions));var o={};function r(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.getDesignDetails=function(e,t){var i={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var n=o[t]||new Set,s=new Set,a=new Set;for(n.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(o[e]||new Set).forEach((function(e){a.add(e)})))}))}return s.forEach((function(t){var n=r(e,t);n&&i.definitions.push(n)})),i}(n,"getDesignDetails")},Vjau:function(e,t,i){"use strict";var n=i("s1D3"),s=i("/lV4"),a={name:"DesignNotePin",components:{GlIcon:n.a},props:{position:{type:Object,required:!1,default:null},label:{type:Number,required:!1,default:null},isResolved:{type:Boolean,required:!1,default:!1},isInactive:{type:Boolean,required:!1,default:!1},isOnImage:{type:Boolean,required:!1,default:!1},isDraft:{type:Boolean,required:!1,default:!1},size:{type:String,required:!1,default:"md",validator:function(e){return["sm","md"].includes(e)}},ariaLabel:{type:String,required:!1,default:null}},computed:{isNewNote(){return null===this.label},pinLabel(){return this.ariaLabel?this.ariaLabel:this.isNewNote?Object(s.a)("Comment form position"):Object(s.h)(Object(s.a)("Comment '%{label}' position"),{label:this.label})}}},o=i("tBpV"),r=Object(o.a)(a,(function(){var e=this,t=e._self._c;return t("button",{staticClass:"gl-display-flex gl-align-items-center gl-justify-content-center gl-font-sm",class:{"btn-transparent comment-indicator":e.isNewNote,"js-image-badge design-note-pin":!e.isNewNote,resolved:e.isResolved,inactive:e.isInactive,draft:e.isDraft,"on-image":e.isOnImage,"gl-absolute":e.position,small:"sm"===e.size},style:e.position,attrs:{"aria-label":e.pinLabel,type:"button"},on:{mousedown:function(t){return e.$emit("mousedown",t)},mouseup:function(t){return e.$emit("mouseup",t)},click:function(t){return e.$emit("click",t)}}},[e.isNewNote?t("gl-icon",{attrs:{name:"image-comment-dark",size:24}}):[e._v("\n    "+e._s(e.label)+"\n  ")]],2)}),[],!1,null,null,null);t.a=r.exports},enyH:function(e,t,i){"use strict";i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return l}));i("3UXl"),i("iyoE");var n=i("J6Lq");const s=function(e){return(e.match("::Version/(.+$)")||[])[1]},a=function(e){return(e.match("DiffNote/(.+$)")||[])[1]},o=function(e){return(function(e){return Object(n.b)(e.project.workItems.nodes[0].widgets).designCollection.designs.nodes}(e)||[])[0]},r=function(e){return e.nodes.map((function(e,t){return{...e,index:t+1,notes:e.notes.nodes}}))},l=function(){return document.querySelector(".layout-page")}},imzI:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));i("ZzK0"),i("z6RN"),i("BzOf");var n=i("VpDa"),s=i.n(n),a=i("udiD"),o=i("NmEs"),r=i("1OWu"),l=i("/lV4"),d=i("DVFT"),c=i("3E4U"),u=i("d08M");class m{constructor(e){var t=this;this.refInMemoryButton=document.createElement("button"),this.refClipboardInstance=new s.a(this.refInMemoryButton),this.refClipboardInstance.on("success",(function(){Object(a.default)(Object(l.g)("GlobalShortcuts|Copied reference to clipboard."))})),this.refClipboardInstance.on("error",(function(){Object(a.default)(Object(l.g)("GlobalShortcuts|Unable to copy the reference at this time."))})),e.addAll([[u.K,function(){return m.openSidebarDropdown("js-assignee")}],[u.L,function(){return m.openSidebarDropdown("js-milestone")}],[u.F,function(){return m.openSidebarDropdown("js-labels")}],[u.I,m.editDescription],[u.H,function(){return t.copyReference()}],[u.G,m.replyWithSelectedText]]),document.addEventListener("focus",this.handleMarkdownFieldFocus)}destroy(){document.removeEventListener("focus",this.handleMarkdownFieldFocus)}static handleMarkdownFieldFocus({target:e}){e.matches(".js-vue-markdown-field .js-gfm-input")&&(m.lastFocusedReplyField=e)}static openSidebarDropdown(e){return setTimeout((function(){const t=`.${e} .shortcut-sidebar-dropdown-toggle`,i=document.querySelector(".is-modal "+t)||document.querySelector(t);null==i||i.click()}),d.a),!1}static editDescription(){var e;return null===(e=document.querySelector(".shortcut-edit-wi-description"))||void 0===e||e.click(),!1}async copyReference(){const e=document.querySelector(".shortcut-copy-reference"),t=null==e?void 0:e.dataset.clipboardText;t&&(this.refInMemoryButton.dataset.clipboardText=t,this.refInMemoryButton.dispatchEvent(new CustomEvent("click")))}static replyWithSelectedText(){const e=".js-vue-markdown-field .js-gfm-input";let t=document.querySelector(".modal "+e)||document.querySelector(e);if(m.lastFocusedReplyField&&Object(r.h)(m.lastFocusedReplyField)&&(t=m.lastFocusedReplyField),!t||!Object(r.h)(t))return!1;const i=Object(o.o)(document.querySelector("#content-body"));if(!i)return t.focus(),!1;let n=Boolean(i.querySelector(".md"));if(!n&&(i.originalNodes&&i.originalNodes.forEach((function(e){let t=e;do{t.matches&&t.matches(".md")&&(n=!0),t=t.parentNode}while(t&&!n)})),!n))return t.focus(),!1;const s=c.a.transformGFMSelection(i.cloneNode(!0)),a=document.createElement("blockquote");return a.appendChild(s),c.a.nodeToGFM(a).then((function(e){if(""===e.trim())return!1;const i=""!==t.value.trim()?"\n\n":"";t.value=`${t.value}${i}${e}\n\n`;const n=document.createEvent("Event");return n.initEvent("autosize:update",!0,!1),t.dispatchEvent(n),t.focus(),!1})).catch((function(){})),!1}}},lnTC:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("ZzK0"),i("z6RN"),i("BzOf");const n=function({mark:e,measures:t=[]}={}){window.requestAnimationFrame((function(){e&&!performance.getEntriesByName(e).length&&performance.mark(e),t.forEach((function(e){performance.measure(e.name,e.start,e.end)}))}))}},ltZm:function(e,t,i){var n=i("q2HD"),s=i("wJPF"),a=i("Uc6l"),o=a&&a.isRegExp,r=o?s(o):n;e.exports=r},mqRG:function(e,t,i){var n=i("tIEw")("length");e.exports=n},nbHk:function(e,t,i){"use strict";var n=i("o4PY"),s=i.n(n),a=i("kUOS"),o=i("67BN"),r=i("4lAS"),l=i("Pyw5"),d=i.n(l);const c={name:"GlAccordionItem",components:{BCollapse:a.a,GlButton:r.a},directives:{GlCollapseToggle:o.a},inject:["accordionSetId","defaultHeaderLevel"],inheritAttrs:!1,model:{prop:"visible",event:"input"},props:{title:{type:String,required:!0},titleVisible:{type:String,default:null,required:!1},visible:{type:Boolean,default:!1,required:!1},headerLevel:{type:Number,required:!1,default:null,validator:e=>e>0&&e<=6},headerClass:{type:[String,Object,Array],required:!1,default:""}},data(){return{accordionItemId:s()("accordion-item-"),isVisible:this.visible}},computed:{headerComponent(){return"h"+(this.headerLevel||this.defaultHeaderLevel())},accordion(){return this.accordionSetId()||void 0},icon(){return this.isVisible?"chevron-down":"chevron-right"},buttonTitle(){return this.isVisible&&this.titleVisible?this.titleVisible:this.title}},watch:{isVisible:{immediate:!0,handler(e){this.$emit("input",e)}}}};const u=d()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gl-accordion-item"},[i(e.headerComponent,{tag:"component",staticClass:"gl-accordion-item-header",class:e.headerClass},[i("gl-button",{directives:[{name:"gl-collapse-toggle",rawName:"v-gl-collapse-toggle",value:e.accordionItemId,expression:"accordionItemId"}],attrs:{variant:"link","button-text-classes":"gl-display-flex",icon:e.icon}},[e._v("\n      "+e._s(e.buttonTitle)+"\n    ")])],1),e._v(" "),i("b-collapse",{staticClass:"gl-mt-3 gl-font-base",attrs:{id:e.accordionItemId,visible:e.isVisible,accordion:e.accordion,"data-testid":"accordion-item-collapse-"+e.accordionItemId},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[e._t("default")],2)],1)},staticRenderFns:[]},void 0,c,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=u},q2HD:function(e,t,i){var n=i("XpzN"),s=i("QA6A");e.exports=function(e){return s(e)&&"[object RegExp]"==n(e)}},vkYZ:function(e,t,i){"use strict";var n={props:{open:{type:Boolean,required:!0}}},s=i("tBpV"),a=Object(s.a)(n,(function(){var e=this._self._c;return e("transition",{attrs:{name:"design-disclosure"}},[this.open?e("aside",{staticClass:"design-disclosure gl-w-full gl-flex gl-flex-col gl-relative gl-border-l gl-z-0 gl-bg-white gl-top-0 gl-right-0 gl-h-full gl-overflow-y-auto"},[this._t("default")],2):this._e()])}),[],!1,null,null,null);t.a=a.exports},voGz:function(e,t,i){var n=i("zx4+");e.exports=function(e,t,i){var s=e.length;return i=void 0===i?s:i,!t&&i>=s?e:n(e,t,i)}},waGw:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("KFC0"),s=i.n(n);let a=null;const o=(e,t)=>{if(!s()(t))throw TypeError("directive value must be a function");a||(a=new ResizeObserver(e=>{e.forEach(e=>{e.target.glResizeHandler(e)})})),e.glResizeHandler=t,a.observe(e)},r=e=>{var t;e.glResizeHandler&&(delete e.glResizeHandler,null===(t=a)||void 0===t||t.unobserve(e))},l={bind(e,t){let{value:i,arg:n=!0}=t;n&&o(e,i)},update(e,t){let{value:i,arg:n=!0}=t;n?o(e,i):r(e)},unbind:r}},"zx4+":function(e,t){e.exports=function(e,t,i){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(i=i>s?s:i)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(s);++n<s;)a[n]=e[n+t];return a}}}]);
//# sourceMappingURL=commons-pages.groups.epics.index-pages.groups.epics.show-pages.groups.issues-pages.groups.work_items-2ac0dbee.e6444be2.chunk.js.map